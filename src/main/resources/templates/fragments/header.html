<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Header</title>
  <link rel="stylesheet" href="/css/common.css">

<!--  <script>-->
<!--    // document.addEventListener("DOMContentLoaded", function() {-->
<!--    //   var isLoggedIn = false; // 로그인 상태를 체크하는 변수-->
<!--    //-->
<!--    //   var loginText = document.getElementById("loginText");-->
<!--    //   var userMenu = document.getElementById("userMenu");-->
<!--    //-->
<!--    //   if (isLoggedIn) {-->
<!--    //     loginText.style.display = "none";-->
<!--    //     userMenu.style.display = "flex";-->
<!--    //   } else {-->
<!--    //     loginText.style.display = "block";-->
<!--    //     userMenu.style.display = "none";-->
<!--    //   }-->
<!--    //-->
<!--    //   // 로그인 상태 체크 로직을 추가하세요-->
<!--    // });-->

<!--  </script>-->
</head>
<body>
<div class="header">
  <div class="header-inner">
    <div class="left-header">
      <a href="/" class="logo">나들이</a>
    </div>

    <div class="right-header" id="right-header">

<!--      <span id="loginText" class="login-text">로그인</span>-->


      <!-- 로그인 상태에 따라 표시될 내용 -->
<!--      <div id="dropdown" class="dropdown">-->
<!--        <div id="userMenu" class="user-menu">-->
<!--          <img src="/path/to/user/photo.jpg" alt="User Photo" class="user-photo">-->
<!--          <div id="dropdownContent" class="dropdown-content">-->
<!--            <a href="#">프로필</a>-->
<!--            <a href="#">로그아웃</a>-->
<!--          </div>-->
<!--        </div>-->
<!--      </div>-->

    </div>
  </div>
</div>

<script>
  const isLoggedIn = true; // 로그인 여부
  const userName = "나들이 님";
  const userEmail = "nadeuli@nadueli.store";

  // function showLoggedInUI() {
  //   const header = document.getElementById("right-header");
  //   header.innerHTML = `
  //               <div class="balloon" onmouseover="toggleBalloon(true)" onmouseout="toggleBalloon(false)" onclick="toggleDropdown()">
  //                   <svg id="balloon-icon" xmlns="http://www.w3.org/2000/svg" width="16" height="16" color="#343434" class="bi bi-balloon" viewBox="0 0 16 16">
  //                       <path fill-rule="evenodd" d="M8 9.984C10.403 9.506 12 7.48 12 5a4 4 0 0 0-8 0c0 2.48 1.597 4.506 4 4.984M13 5c0 2.837-1.789 5.227-4.52 5.901l.244.487a.25.25 0 1 1-.448.224l-.008-.017c.008.11.02.202.037.29.054.27.161.488.419 1.003.288.578.235 1.15.076 1.629-.157.469-.422.867-.588 1.115l-.004.007a.25.25 0 1 1-.416-.278c.168-.252.4-.6.533-1.003.133-.396.163-.824-.049-1.246l-.013-.028c-.24-.48-.38-.758-.448-1.102a3 3 0 0 1-.052-.45l-.04.08a.25.25 0 1 1-.447-.224l.244-.487C4.789 10.227 3 7.837 3 5a5 5 0 0 1 10 0m-6.938-.495a2 2 0 0 1 1.443-1.443C7.773 2.994 8 2.776 8 2.5s-.226-.504-.498-.459a3 3 0 0 0-2.46 2.461c-.046.272.182.498.458.498s.494-.227.562-.495"/>
  //                   </svg>
  //               </div>
  //               <div class="dropdown" id="dropdown">
  //                   <div style="padding: 10px; font-weight: bold;">${userName}</div>
  //                   <div style="padding: 10px; font-size: 12px; color: #666;">${userEmail}</div>
  //                   <hr>
  //                   <a href="#">일정 생성</a>
  //                   <a href="#">일정 관리</a>
  //                   <a href="#">회원 정보</a>
  //                   <hr>
  //                   <a href="#">로그아웃</a>
  //               </div>
  //           `;
  // }

  let dropdownTimeout;

  function showLoggedInUI() {
    const header = document.getElementById("right-header");
    header.innerHTML = `
    <div class="balloon"
         onmouseover="toggleBalloon(true)"
         onmouseout="toggleBalloon(false)"
         onclick="toggleDropdown()">
        <svg id="balloon-icon" xmlns="http://www.w3.org/2000/svg" width="30" height="30" color="#343434" class="bi bi-balloon" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M8 9.984C10.403 9.506 12 7.48 12 5a4 4 0 0 0-8 0c0 2.48 1.597 4.506 4 4.984M13 5c0 2.837-1.789 5.227-4.52 5.901l.244.487a.25.25 0 1 1-.448.224l-.008-.017c.008.11.02.202.037.29.054.27.161.488.419 1.003.288.578.235 1.15.076 1.629-.157.469-.422.867-.588 1.115l-.004.007a.25.25 0 1 1-.416-.278c.168-.252.4-.6.533-1.003.133-.396.163-.824-.049-1.246l-.013-.028c-.24-.48-.38-.758-.448-1.102a3 3 0 0 1-.052-.45l-.04.08a.25.25 0 1 1-.447-.224l.244-.487C4.789 10.227 3 7.837 3 5a5 5 0 0 1 10 0m-6.938-.495a2 2 0 0 1 1.443-1.443C7.773 2.994 8 2.776 8 2.5s-.226-.504-.498-.459a3 3 0 0 0-2.46 2.461c-.046.272.182.498.458.498s.494-.227.562-.495"/>
        </svg>
    </div>
    <div class="dropdown" id="dropdown">
        <div style="padding: 5px; color: #343434; text-align: center;">${userName}</div>
        <div style="padding: 5px; font-size: 15px; color: #8E8B82; text-align: center;">${userEmail}</div>
        <hr>
        <a href="#">일정 생성</a>
        <a href="#">일정 확인</a>
        <a href="#">회원 정보</a>
        <hr>
        <a href="#">로그아웃</a>
    </div>
  `;
  }


  function showLoggedOutUI() {
    const header = document.getElementById("right-header");
    header.innerHTML = '<a href="/login">로그인</a>';
  }

  // function toggleBalloon(isHovered) {
  //   const balloonIcon = document.getElementById("balloon-icon");
  //   if (isHovered) {
  //     balloonIcon.innerHTML = `
  //                   <path fill-rule="evenodd" d="M8.48 10.901C11.211 10.227 13 7.837 13 5A5 5 0 0 0 3 5c0 2.837 1.789 5.227 4.52 5.901l-.244.487a.25.25 0 1 0 .448.224l.04-.08c.009.17.024.315.051.45.068.344.208.622.448 1.102l.013.028c.212.422.182.85.05 1.246-.135.402-.366.751-.534 1.003a.25.25 0 0 0 .416.278l.004-.007c.166-.248.431-.646.588-1.115.16-.479.212-1.051-.076-1.629-.258-.515-.365-.732-.419-1.004a2 2 0 0 1-.037-.289l.008.017a.25.25 0 1 0 .448-.224zM4.352 3.356a4 4 0 0 1 3.15-2.325C7.774.997 8 1.224 8 1.5s-.226.496-.498.542c-.95.162-1.749.78-2.173 1.617a.6.6 0 0 1-.52.341c-.346 0-.599-.329-.457-.644"/>
  //               `;
  //   } else {
  //     balloonIcon.innerHTML = `
  //                       <path fill-rule="evenodd" d="M8 9.984C10.403 9.506 12 7.48 12 5a4 4 0 0 0-8 0c0 2.48 1.597 4.506 4 4.984M13 5c0 2.837-1.789 5.227-4.52 5.901l.244.487a.25.25 0 1 1-.448.224l-.008-.017c.008.11.02.202.037.29.054.27.161.488.419 1.003.288.578.235 1.15.076 1.629-.157.469-.422.867-.588 1.115l-.004.007a.25.25 0 1 1-.416-.278c.168-.252.4-.6.533-1.003.133-.396.163-.824-.049-1.246l-.013-.028c-.24-.48-.38-.758-.448-1.102a3 3 0 0 1-.052-.45l-.04.08a.25.25 0 1 1-.447-.224l.244-.487C4.789 10.227 3 7.837 3 5a5 5 0 0 1 10 0m-6.938-.495a2 2 0 0 1 1.443-1.443C7.773 2.994 8 2.776 8 2.5s-.226-.504-.498-.459a3 3 0 0 0-2.46 2.461c-.046.272.182.498.458.498s.494-.227.562-.495"/>
  //               `;
  //   }
  // }

  // function toggleBalloon(isHovered) {
  //   const balloonIcon = document.getElementById("balloon-icon");
  //   const dropdown = document.getElementById("dropdown");
  //
  //   if (isHovered) {
  //     balloonIcon.innerHTML = `
  //     <path fill-rule="evenodd" d="M8.48 10.901C11.211 10.227 13 7.837 13 5A5 5 0 0 0 3 5c0 2.837 1.789 5.227 4.52 5.901l-.244.487a.25.25 0 1 0 .448.224l.04-.08c.009.17.024.315.051.45.068.344.208.622.448 1.102l.013.028c.212.422.182.85.05 1.246-.135.402-.366.751-.534 1.003a.25.25 0 0 0 .416.278l.004-.007c.166-.248.431-.646.588-1.115.16-.479.212-1.051-.076-1.629-.258-.515-.365-.732-.419-1.004a2 2 0 0 1-.037-.289l.008.017a.25.25 0 1 0 .448-.224zM4.352 3.356a4 4 0 0 1 3.15-2.325C7.774.997 8 1.224 8 1.5s-.226.496-.498.542c-.95.162-1.749.78-2.173 1.617a.6.6 0 0 1-.52.341c-.346 0-.599-.329-.457-.644"/>
  //   `;
  //     dropdown.style.display = "flex"; // Hover 시 dropdown 표시
  //     // clearTimeout(dropdownTimeout); // 타이머를 클리어하여 강제로 dropdown 표시 유지
  //   } else {
  //     balloonIcon.innerHTML = `
  //     <path fill-rule="evenodd" d="M8 9.984C10.403 9.506 12 7.48 12 5a4 4 0 0 0-8 0c0 2.48 1.597 4.506 4 4.984M13 5c0 2.837-1.789 5.227-4.52 5.901l.244.487a.25.25 0 1 1-.448.224l-.008-.017c.008.11.02.202.037.29.054.27.161.488.419 1.003.288.578.235 1.15.076 1.629-.157.469-.422.867-.588 1.115l-.004.007a.25.25 0 1 1-.416-.278c.168-.252.4-.6.533-1.003.133-.396.163-.824-.049-1.246l-.013-.028c-.24-.48-.38-.758-.448-1.102a3 3 0 0 1-.052-.45l-.04.08a.25.25 0 1 1-.447-.224l.244-.487C4.789 10.227 3 7.837 3 5a5 5 0 0 1 10 0m-6.938-.495a2 2 0 0 1 1.443-1.443C7.773 2.994 8 2.776 8 2.5s-.226-.504-.498-.459a3 3 0 0 0-2.46 2.461c-.046.272.182.498.458.498s.494-.227.562-.495"/>
  //   `;
  //     // 마우스가 벗어난 후 500ms 대기 후 dropdown 숨기기
  //     // dropdownTimeout = setTimeout(() => {
  //     //   dropdown.style.display = "none";
  //     // }, 500);
  //     dropdown.style.display = "none";
  //   }
  // }

  function toggleBalloon(isHovered) {
    const balloonIcon = document.getElementById("balloon-icon");
    const dropdown = document.getElementById("dropdown");

    if (isHovered) {
      balloonIcon.innerHTML = `
    <path fill-rule="evenodd" d="M8.48 10.901C11.211 10.227 13 7.837 13 5A5 5 0 0 0 3 5c0 2.837 1.789 5.227 4.52 5.901l-.244.487a.25.25 0 1 0 .448.224l.04-.08c.009.17.024.315.051.45.068.344.208.622.448 1.102l.013.028c.212.422.182.85.05 1.246-.135.402-.366.751-.534 1.003a.25.25 0 0 0 .416.278l.004-.007c.166-.248.431-.646.588-1.115.16-.479.212-1.051-.076-1.629-.258-.515-.365-.732-.419-1.004a2 2 0 0 1-.037-.289l.008.017a.25.25 0 1 0 .448-.224zM4.352 3.356a4 4 0 0 1 3.15-2.325C7.774.997 8 1.224 8 1.5s-.226.496-.498.542c-.95.162-1.749.78-2.173 1.617a.6.6 0 0 1-.52.341c-.346 0-.599-.329-.457-.644"/>
  `;
      dropdown.style.display = "flex"; // Hover 시 dropdown 표시
    } else {
      balloonIcon.innerHTML = `
    <path fill-rule="evenodd" d="M8 9.984C10.403 9.506 12 7.48 12 5a4 4 0 0 0-8 0c0 2.48 1.597 4.506 4 4.984M13 5c0 2.837-1.789 5.227-4.52 5.901l.244.487a.25.25 0 1 1-.448.224l-.008-.017c.008.11.02.202.037.29.054.27.161.488.419 1.003.288.578.235 1.15.076 1.629-.157.469-.422.867-.588 1.115l-.004.007a.25.25 0 1 1-.416-.278c.168-.252.4-.6.533-1.003.133-.396.163-.824-.049-1.246l-.013-.028c-.24-.48-.38-.758-.448-1.102a3 3 0 0 1-.052-.45l-.04.08a.25.25 0 1 1-.447-.224l.244-.487C4.789 10.227 3 7.837 3 5a5 5 0 0 1 10 0m-6.938-.495a2 2 0 0 1 1.443-1.443C7.773 2.994 8 2.776 8 2.5s-.226-.504-.498-.459a3 3 0 0 0-2.46 2.461c-.046.272.182.498.458.498s.494-.227.562-.495"/>
  `;
      if (!dropdown.matches(":hover")) {
        dropdown.style.display = "none";
      }
    }
  }

  function toggleDropdown() {
    const dropdown = document.getElementById("dropdown");
    dropdown.style.display = dropdown.style.display === "flex" ? "none" : "flex";
  }

  function toggleDropdown() {
    const dropdown = document.getElementById("dropdown");
    dropdown.style.display = dropdown.style.display === "flex" ? "none" : "flex";
  }

  isLoggedIn ? showLoggedInUI() : showLoggedOutUI();


  document.getElementById("dropdown").addEventListener("mouseleave", function() {
    this.style.display = "none";
  });

  // function showLoggedInUI(id, name, email) {
  //   const header = document.getElementById(id);
  //   console.log("showLoggedInUI(" + id + name + email + ")");
  //   console.log("!header : " + !header);
  //
  //   if (!header) return;
  //
  //
  //   header.innerHTML = `
  //       <div class="user-menu">
  //           <div class="balloon" id="balloon-icon">
  //               <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#343434" class="bi bi-balloon" viewBox="0 0 16 16">
  //                   <path fill-rule="evenodd" d="M8 9.984C10.403 9.506 12 7.48 12 5a4 4 0 0 0-8 0c0 2.48 1.597 4.506 4 4.984M13 5c0 2.837-1.789 5.227-4.52 5.901l.244.487a.25.25 0 1 1-.448.224l-.008-.017c.008.11.02.202.037.29.054.27.161.488.419 1.003.288.578.235 1.15.076 1.629-.157.469-.422.867-.588 1.115l-.004.007a.25.25 0 1 1-.416-.278c.168-.252.4-.6.533-1.003.133-.396.163-.824-.049-1.246l-.013-.028c-.24-.48-.38-.758-.448-1.102a3 3 0 0 1-.052-.45l-.04.08a.25.25 0 1 1-.447-.224l.244-.487C4.789 10.227 3 7.837 3 5a5 5 0 0 1 10 0"/>
  //               </svg>
  //           </div>
  //           <div class="dropdown-menu" id="dropdown-menu">
  //               <div class="user-info">
  //                   <p>${name} 님</p>
  //                   <p class="email">${email}</p>
  //               </div>
  //               <hr>
  //               <a href="/create-schedule">일정 관리</a>
  //               <a href="/manage-schedule">일정 생성</a>
  //               <a href="/profile">회원 정보</a>
  //               <hr>
  //               <a href="/logout">로그아웃</a>
  //           </div>
  //       </div>
  //   `;
  //
  //   const balloon = document.getElementById("balloon-icon");
  //   const dropdown = document.getElementById("dropdown-menu");
  //
  //   balloon.addEventListener("mouseenter", () => {
  //     balloon.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#343434" class="bi bi-balloon-fill" viewBox="0 0 16 16">
  //           <path fill-rule="evenodd" d="M8.48 10.901C11.211 10.227 13 7.837 13 5A5 5 0 0 0 3 5c0 2.837 1.789 5.227 4.52 5.901l-.244.487a.25.25 0 1 0 .448.224l.04-.08c.009.17.024.315.051.45.068.344.208.622.448 1.102l.013.028c.212.422.182.85.05 1.246-.135.402-.366.751-.534 1.003a.25.25 0 0 0 .416.278l.004-.007c.166-.248.431-.646.588-1.115.16-.479.212-1.051-.076-1.629-.258-.515-.365-.732-.419-1.004a2 2 0 0 1-.037-.289l.008.017a.25.25 0 1 0 .448-.224z"/>
  //       </svg>`;
  //   });
  //
  //   balloon.addEventListener("mouseleave", () => {
  //     balloon.innerHTML = `<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="#343434" class="bi bi-balloon" viewBox="0 0 16 16">
  //           <path fill-rule="evenodd" d="M8 9.984C10.403 9.506 12 7.48 12 5a4 4 0 0 0-8 0c0 2.48 1.597 4.506 4 4.984M13 5c0 2.837-1.789 5.227-4.52 5.901l.244.487a.25.25 0 1 1-.448.224l-.008-.017c.008.11.02.202.037.29.054.27.161.488.419 1.003.288.578.235 1.15.076 1.629-.157.469-.422.867-.588 1.115l-.004.007a.25.25 0 1 1-.416-.278c.168-.252.4-.6.533-1.003.133-.396.163-.824-.049-1.246l-.013-.028c-.24-.48-.38-.758-.448-1.102a3 3 0 0 1-.052-.45l-.04.08a.25.25 0 1 1-.447-.224l.244-.487C4.789 10.227 3 7.837 3 5a5 5 0 0 1 10 0"/>
  //       </svg>`;
  //   });
  //
  //   balloon.addEventListener("click", () => {
  //     dropdown.classList.toggle("show");
  //   });
  // }
  //
  // function showLoggedOutUI(id) {
  //   const header = document.getElementById(id);
  //   if (!header) return;
  //
  //   header.innerHTML = `<a href="/login" class="login-btn">로그인</a>`;
  // }

  // window.onload = function () {
  //   console.log("✅ window.onload 이벤트 실행됨!");
  //
  //   // 테스트용 로그인 여부 변수
  //   const isLoggedIn = true; // 로그인 여부
  //   const userName = "나들이"; // 사용자 이름
  //   const userEmail = "nadeuli@nadeuli.store"; // 사용자 이메일
  //
  //   // 로그인 상태에 따라 UI를 표시
  //   if (isLoggedIn) {
  //     showLoggedInUI("right-header", userName, userEmail);
  //   } else {
  //     showLoggedOutUI("right-header");
  //   }
  // };

  // document.addEventListener("DOMContentLoaded", function () {
  //   console.log("✅ header DOMContentLoaded 실행됨!");
  //
  //   const isLoggedIn = true; // 로그인 여부 (테스트용)
  //   const userName = "나들이"; // 사용자 이름
  //   const userEmail = "nadeuli@nadeuli.store"; // 사용자 이메일
  //
  //   if (isLoggedIn) {
  //     showLoggedInUI("right-header", userName, userEmail);
  //   } else {
  //     showLoggedOutUI("right-header");
  //   }
  // });


  // document.addEventListener("DOMContentLoaded", () => {
  //   const isLoggedIn = true; // 로그인 여부
  //   const userName = "나들이"; // 사용자 이름
  //   const userEmail = "nadeuli@nadeuli.store"; // 사용자 이메일
  //
  //   console.log("✅ header DOMContentLoaded 실행됨!");
  //
  //   if (isLoggedIn) {
  //     showLoggedInUI("right-header", userName, userEmail);
  //   } else {
  //     showLoggedOutUI("right-header");
  //   }
  // });
</script>

</body>
</html>