<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì¥ì†Œ ì¶”ê°€</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
    <style>
        /* ê¸°ë³¸ ìŠ¤í¬ë¡¤ë°” ìŠ¤íƒ€ì¼ */
        /* ê³µí†µ ìŠ¤íƒ€ì¼ */
        body {
            scrollbar-width: thin; /* Firefoxìš© ì–‡ì€ ìŠ¤í¬ë¡¤ë°” */
            scrollbar-color: #888 #ddd; /* thumb: íšŒìƒ‰, track: ì—°í•œ íšŒìƒ‰ */
        }
        /* ëª¨ë“  ìš”ì†Œì— ì ìš© */
        * {
            /* ìŠ¤í¬ë¡¤ë°” ìƒ‰ìƒ ì„¤ì •: ì—„ì§€(thumb)ì™€ íŠ¸ë™(track) */
            scrollbar-color: #888 #f1f1f1;
            /* ìŠ¤í¬ë¡¤ë°” ë‘ê»˜ ì„¤ì •: 'auto' ë˜ëŠ” 'thin' */
            scrollbar-width: thin;
        }

        /* WebKit ê¸°ë°˜ ë¸Œë¼ìš°ì €ë¥¼ ìœ„í•œ ë¹„í‘œì¤€ êµ¬í˜„ */
        ::-webkit-scrollbar {
            width: 8px; /* ì„¸ë¡œ ìŠ¤í¬ë¡¤ë°” ë„ˆë¹„ */
            height: 8px; /* ê°€ë¡œ ìŠ¤í¬ë¡¤ë°” ë†’ì´ */
        }

        ::-webkit-scrollbar-thumb {
            background-color: #888;
            border-radius: 10px;
        }

        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }


        html, body {
            height: 100%;
            margin: 0;
            overflow: hidden; /* ìŠ¤í¬ë¡¤ ì œê±° */
        }

        .container {
            margin: 0;
            width: 500px;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .tab-content-wrap {
            flex-grow: 1;
            display: flex;
            height: 100%;
        }

        .search-area {
            width: 100%;
            margin: 0;
            padding: 20px;
            border-right: 2px solid #ddd;
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .search-container {
            display: flex;
            user-select: none;
            align-items: center;
            width: 100%;
            min-height: 50px;
            height: 50px;
            background-color: #ffffff;
            border-radius: 25px;
            border: 1px solid #ddd;
            padding: 0 15px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        .search-icon, .search-clear {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            font-size: 16px;
            user-select: none;
            color: #666;
            cursor: pointer;
        }
        .search-input {
            flex-grow: 1;
            border: none;
            background-color: transparent;
            height: 100%;
            font-size: 1em;
            padding: 0 10px;
        }
        .search-input:focus {
            outline: none;
        }

        .map-area {
            height: 200px; /* ì§€ë„ ì˜ì—­ ê³ ì • ë†’ì´ */
            margin-top: 10px;
        }
        #map {
            width: 100%;
            height: 200px;
        }

        .search-results-header {
            font-weight: bold;
            font-size: 1rem;
            text-align: center;
            padding: 15px 10px 5px 10px;
        }

        .search-results-wrap {
            flex-grow: 1;
            overflow-y: auto;
        }

        #google-search-results {
            min-height: 100px;
            padding: 10px;
            background-color: #f3f3f3;
        }

        .google-result-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 13px 13px;
            margin-bottom: 8px;
            border-radius: 8px;
            background: white;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .google-result-content {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .google-result-title {
            font-size: 1rem;
            font-weight: bold;
            color: #333;
        }

        .google-result-address {
            font-size: 0.8rem;
            color: #666;
        }

        .google-result-tags {
            font-size: 0.9rem;
            color: #555;
            font-weight: normal;
        }

        .google-register-btn {
            padding: 5px 10px;
            font-size: 0.8rem;
            white-space: nowrap;
        }


        /* âœ… íƒ­ ë²„íŠ¼ ìŠ¤íƒ€ì¼ */
        .custom-tabs {
            user-select: none;
            display: flex;
            width: 100%;
            border-bottom: 2px solid #ddd;
        }

        .tab-button {
            flex: 1; /* ë„ˆë¹„ë¥¼ 1/2ì”© */
            padding: 15px;
            text-align: center;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            background-color: white;
            border: none;
            border-bottom: 2px solid transparent;
            transition: border-bottom 0.3s;
        }

        .tab-button.active {
            border-bottom: 2px solid #007bff; /* í™œì„± íƒ­ í‘œì‹œ */
        }

        .tab-content {
            width: 100%;
        }

        .tab-pane {
            height: 100%;
            display: none; /* ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê¹€ */
        }

        .tab-pane.active {
            display: block; /* í™œì„±í™”ëœ íƒ­ë§Œ í‘œì‹œ */
        }

        .filter-buttons {
            user-select: none;
            display: flex;
            gap: 4px;
            margin-top: 10px;
            margin-bottom: 10px;
            flex-wrap: wrap;
        }

        .filter-button {
            padding: 1px 11px;
            font-size: 0.9em;
            border: 1px solid #007bff;
            background: white;
            color: #007bff;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .filter-button.active {
            background: #007bff;
            color: white;
        }

        .list-item {
            user-select: none;
            display: flex;
            align-items: center;
            justify-content: space-between;
            margin: 0 10px 20px 10px;

            cursor: pointer;
            transition: background-color 0.3s;
        }


        .list-item img {
            width: 73px;
            height: 73px;
            border-radius: 5px;
            object-fit: cover;
            margin-right: 20px;
        }


        .list-item .info {
            flex-grow: 1;
        }

        .list-item .title {
            font-weight: bold;
            font-size: 0.9em;
        }

        .info-line {
            display: flex;
            align-items: center;
            gap: 8px;
            font-size: 0.8em;
            color: #666;
        }

        .address {
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
            max-width: 300px;
        }

        .like, .star {
            display: flex;
            align-items: center;
            gap: 5px;
            font-size: 0.9em;
        }

        .bi-heart {
            color: red;
        }

        .bi-star-fill {
            color: gold;
        }
        .add-button-wrap {

            width: 30px;
            height: 72px;

        }
        .add-button {

            height: 100%;
            width: 100%;
            border-radius: 5px;
            border: none;
            background-color: #007bff;
            color: white;
            font-size: 1.2em;
            font-weight: bold;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }



        #nadeuli-search-results{
            /*background-color: #00ff59;*/
        }

    </style>
</head>
    <body onload="loadGoogleMapsApi()">
        <div class="container">
            <!-- âœ… ì»¤ìŠ¤í…€ íƒ­ ë²„íŠ¼ -->
            <div class="custom-tabs">
                <button class="tab-button active" id="nadeuli-tab-btn" onclick="showTab('nadeuli-search-tab')">ì¶”ì²œ ì¥ì†Œ ê²€ìƒ‰</button>
                <button class="tab-button" id="google-tab-btn" onclick="showTab('google-search-tab')">ë¯¸ë“±ë¡ ì¥ì†Œ ì¶”ê°€</button>
            </div>

            <div class="tab-content-wrap">
                <div class="tab-content">
                    <!-- âœ… ë‚˜ë“¤ì´ ì„œë²„ ê²€ìƒ‰ íƒ­ -->
                    <div class="tab-pane active" id="nadeuli-search-tab">
                        <div class="search-area">
                            <div class="search-container">
                                <span class="search-icon" onclick="searchNadeuliPlaces()"><i class="bi bi-search"></i></span>
                                <input type="text" id="nadeuli-place-search" class="search-input" placeholder="ë‚˜ë“¤ì´ ì¥ì†Œ ê²€ìƒ‰" autocomplete="off" onkeydown="handleNadeuliKeyPress(event)" />
                                <span class="search-clear" onclick="clearNadeuliSearch()"><i class="bi bi-x"></i></span>
                            </div>
                            <div class="filter-buttons">
                                <button class="filter-button" data-filter="attraction">ëª…ì†Œ</button>
                                <button class="filter-button" data-filter="restaurant">ì‹ë‹¹</button>
                                <button class="filter-button" data-filter="accommodation">ìˆ™ì†Œ</button>
                                <button class="filter-button" data-filter="cafe">ì¹´í˜</button>
                                <button class="filter-button" data-filter="transport">êµí†µ</button>
                                <button class="filter-button" data-filter="amenity">í¸ì˜ì‹œì„¤</button>
                            </div>
                            <div class="search-results-wrap" id="nadeuli-search-results">
                                <div class="list-item" data-id="place-1">
                                    <img src="https://d2tfgua35fdi4.cloudfront.net/journal/dc04d238-69db-467f-a09c-88bc5c8a41d0_ChIJvcDN4cNbDDURpAdMx-0uviI.jpg" alt="ì¥ì†Œ ì´ë¯¸ì§€" />
                                    <div class="info">
                                        <div class="title">ì„±ì‚° ì¼ì¶œë´‰</div>
                                        <div class="info-line"><div class="place-type">ëª…ì†Œ</div> <div class="address" title="ëŒ€í•œë¯¼êµ­ ì„œê·€í¬ì‹œ ì„±ì‚° ì¼ì¶œë´‰">ëŒ€í•œë¯¼êµ­ ì„œê·€í¬ì‹œ ì„±ì‚° ì¼ì¶œë´‰</div></div>
                                        <div class="info-line"> <div class="like"><i class="bi bi-heart"></i> 120</div><div class="star"><i class="bi bi-star-fill"></i> 4.5</div></div>
                                    </div>
                                    <div class="add-button-wrap">
                                        <button class="add-button">+</button>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <!-- âœ… Google ê²€ìƒ‰ íƒ­ -->
                    <div class="tab-pane" id="google-search-tab">
                        <div class="search-area">
                            <div class="search-container">
                                <span class="search-icon" onclick="searchGooglePlaces()"><i class="bi bi-search"></i></span>
                                <input type="text" id="google-place-search" class="search-input" placeholder="Google ì¥ì†Œ ê²€ìƒ‰" autocomplete="off" onkeydown="handleGoogleKeyPress(event)" />
                                <span class="search-clear" onclick="clearGoogleSearch()"><i class="bi bi-x"></i></span>
                            </div>
                            <div class="map-area">
                                <div id="map"></div>
                            </div>
                            <div id="google-search-results-header" class="search-results-header">ê²€ìƒ‰ ê²°ê³¼ ì´ 0ê±´</div>
                            <div class="search-results-wrap">
                                <div id="google-search-results" class="list-group"></div>
                            </div>
                        </div>
                    </div>

                </div>
            </div>
        </div>


<script>

    let map;
    let markers = [];
    const placeTypeTranslations={"car_dealer":"ìë™ì°¨ ë”œëŸ¬","car_rental":"ë Œí„°ì¹´","car_repair":"ìë™ì°¨ ì •ë¹„ì†Œ","car_wash":"ì„¸ì°¨ì¥","electric_vehicle_charging_station":"ì „ê¸°ì°¨ ì¶©ì „ì†Œ","gas_station":"ì£¼ìœ ì†Œ","parking":"ì£¼ì°¨ì¥","rest_stop":"íœ´ê²Œì†Œ","corporate_office":"ê¸°ì—… ì‚¬ë¬´ì‹¤","farm":"ë†ì¥","ranch":"ëª©ì¥","art_gallery":"ë¯¸ìˆ ê´€","art_studio":"ì˜ˆìˆ  ì‘ì—…ì‹¤","auditorium":"ê°•ë‹¹","cultural_landmark":"ë¬¸í™” ëœë“œë§ˆí¬","historical_place":"ìœ ì ì§€","monument":"ê¸°ë…ë¹„","museum":"ë°•ë¬¼ê´€","performing_arts_theater":"ê³µì—° ì˜ˆìˆ  ê·¹ì¥","sculpture":"ì¡°ê°ìƒ","library":"ë„ì„œê´€","preschool":"ìœ ì¹˜ì›","primary_school":"ì´ˆë“±í•™êµ","school":"í•™êµ","secondary_school":"ì¤‘Â·ê³ ë“±í•™êµ","university":"ëŒ€í•™êµ","adventure_sports_center":"ìµìŠ¤íŠ¸ë¦¼ ìŠ¤í¬ì¸  ì„¼í„°","amphitheatre":"ì›í˜• ê·¹ì¥","amusement_center":"ì˜¤ë½ ì„¼í„°","amusement_park":"ë†€ì´ê³µì›","aquarium":"ìˆ˜ì¡±ê´€","banquet_hall":"ì—°íšŒì¥","barbecue_area":"ë°”ë² í êµ¬ì—­","botanical_garden":"ì‹ë¬¼ì›","bowling_alley":"ë³¼ë§ì¥","casino":"ì¹´ì§€ë…¸","childrens_camp":"ì–´ë¦°ì´ ìº í”„","comedy_club":"ì½”ë¯¸ë”” í´ëŸ½","community_center":"ì»¤ë®¤ë‹ˆí‹° ì„¼í„°","concert_hall":"ì½˜ì„œíŠ¸ í™€","convention_center":"ì»¨ë²¤ì…˜ ì„¼í„°","cultural_center":"ë¬¸í™” ì„¼í„°","cycling_park":"ìì „ê±° ê³µì›","dance_hall":"ëŒ„ìŠ¤í™€","dog_park":"ì• ê²¬ ê³µì›","event_venue":"ì´ë²¤íŠ¸ ì¥ì†Œ","ferris_wheel":"ëŒ€ê´€ëŒì°¨","garden":"ì •ì›","hiking_area":"ë“±ì‚°ë¡œ","historical_landmark":"ì—­ì‚¬ì  ëœë“œë§ˆí¬","internet_cafe":"ì¸í„°ë„· ì¹´í˜","karaoke":"ë…¸ë˜ë°©","marina":"ë§ˆë¦¬ë‚˜ (í•­êµ¬)","movie_rental":"ë¹„ë””ì˜¤ ëŒ€ì—¬ì ","movie_theater":"ì˜í™”ê´€","national_park":"êµ­ë¦½ê³µì›","night_club":"ë‚˜ì´íŠ¸í´ëŸ½","observation_deck":"ì „ë§ëŒ€","off_roading_area":"ì˜¤í”„ë¡œë“œ ì§€ì—­","opera_house":"ì˜¤í˜ë¼ í•˜ìš°ìŠ¤","park":"ê³µì›","philharmonic_hall":"í•„í•˜ëª¨ë‹‰ í™€","picnic_ground":"ì†Œí’ ì¥ì†Œ","planetarium":"ì²œë¬¸ê´€","plaza":"ê´‘ì¥","roller_coaster":"ë¡¤ëŸ¬ì½”ìŠ¤í„°","skateboard_park":"ìŠ¤ì¼€ì´íŠ¸ ê³µì›","state_park":"ì£¼ë¦½ê³µì›","tourist_attraction":"ê´€ê´‘ëª…ì†Œ","video_arcade":"ë¹„ë””ì˜¤ ì•„ì¼€ì´ë“œ","visitor_center":"ë°©ë¬¸ì ì„¼í„°","water_park":"ì›Œí„°íŒŒí¬","wedding_venue":"ì›¨ë”©í™€","wildlife_park":"ì•¼ìƒë™ë¬¼ ê³µì›","wildlife_refuge":"ì•¼ìƒë™ë¬¼ ë³´í˜¸êµ¬ì—­","zoo":"ë™ë¬¼ì›","public_bath":"ëŒ€ì¤‘ëª©ìš•íƒ•","public_bathroom":"ê³µì¤‘í™”ì¥ì‹¤","stable":"ë§ˆêµ¬ê°„","accounting":"íšŒê³„ ì‚¬ë¬´ì†Œ","atm":"ATM","bank":"ì€í–‰","acai_shop":"ì•„ì‚¬ì´ ë³¼ ì „ë¬¸ì ","afghani_restaurant":"ì•„í”„ê°€ë‹ˆìŠ¤íƒ„ ìŒì‹ì ","african_restaurant":"ì•„í”„ë¦¬ì¹´ ìŒì‹ì ","american_restaurant":"ì•„ë©”ë¦¬ì¹¸ ë ˆìŠ¤í† ë‘","asian_restaurant":"ì•„ì‹œì•ˆ ë ˆìŠ¤í† ë‘","bagel_shop":"ë² ì´ê¸€ ê°€ê²Œ","bakery":"ë² ì´ì»¤ë¦¬","bar":"ë°”","bar_and_grill":"ë°” & ê·¸ë¦´","barbecue_restaurant":"ë°”ë² í ë ˆìŠ¤í† ë‘","brazilian_restaurant":"ë¸Œë¼ì§ˆ ìŒì‹ì ","breakfast_restaurant":"ì¡°ì‹ ì „ë¬¸ì ","brunch_restaurant":"ë¸ŒëŸ°ì¹˜ ë ˆìŠ¤í† ë‘","buffet_restaurant":"ë·”í˜ ë ˆìŠ¤í† ë‘","cafe":"ì¹´í˜","cafeteria":"êµ¬ë‚´ì‹ë‹¹","candy_store":"ìº”ë””ìƒµ","cat_cafe":"ê³ ì–‘ì´ ì¹´í˜","chinese_restaurant":"ì¤‘ì‹ë‹¹","chocolate_factory":"ì´ˆì½œë¦¿ ê³µì¥","chocolate_shop":"ì´ˆì½œë¦¿ ê°€ê²Œ","coffee_shop":"ì»¤í”¼ìˆ","confectionery":"ê³¼ìì ","deli":"ë¸ë¦¬","dessert_restaurant":"ë””ì €íŠ¸ ë ˆìŠ¤í† ë‘","dessert_shop":"ë””ì €íŠ¸ ê°€ê²Œ","diner":"ë‹¤ì´ë„ˆ","dog_cafe":"ê°•ì•„ì§€ ì¹´í˜","donut_shop":"ë„ë„› ê°€ê²Œ","fast_food_restaurant":"íŒ¨ìŠ¤íŠ¸í‘¸ë“œì ","fine_dining_restaurant":"íŒŒì¸ë‹¤ì´ë‹ ë ˆìŠ¤í† ë‘","food_court":"í‘¸ë“œì½”íŠ¸","french_restaurant":"í”„ë‘ìŠ¤ ìŒì‹ì ","greek_restaurant":"ê·¸ë¦¬ìŠ¤ ìŒì‹ì ","hamburger_restaurant":"í–„ë²„ê±° ê°€ê²Œ","ice_cream_shop":"ì•„ì´ìŠ¤í¬ë¦¼ ê°€ê²Œ","indian_restaurant":"ì¸ë„ ìŒì‹ì ","indonesian_restaurant":"ì¸ë„ë„¤ì‹œì•„ ìŒì‹ì ","italian_restaurant":"ì´íƒˆë¦¬ì•„ ìŒì‹ì ","japanese_restaurant":"ì¼ì‹ë‹¹","juice_shop":"ì£¼ìŠ¤ ì „ë¬¸ì ","korean_restaurant":"í•œì‹ë‹¹","lebanese_restaurant":"ë ˆë°”ë…¼ ìŒì‹ì ","meal_delivery":"ë°°ë‹¬ ì „ë¬¸ì ","meal_takeaway":"í…Œì´í¬ì•„ì›ƒ ì „ë¬¸ì ","mediterranean_restaurant":"ì§€ì¤‘í•´ ìŒì‹ì ","mexican_restaurant":"ë©•ì‹œì½” ìŒì‹ì ","middle_eastern_restaurant":"ì¤‘ë™ ìŒì‹ì ","pizza_restaurant":"í”¼ì ê°€ê²Œ","pub":"í","ramen_restaurant":"ë¼ë©˜ ì „ë¬¸ì ","restaurant":"ë ˆìŠ¤í† ë‘","sandwich_shop":"ìƒŒë“œìœ„ì¹˜ ê°€ê²Œ","seafood_restaurant":"í•´ì‚°ë¬¼ ë ˆìŠ¤í† ë‘","spanish_restaurant":"ìŠ¤í˜ì¸ ìŒì‹ì ","steak_house":"ìŠ¤í…Œì´í¬ í•˜ìš°ìŠ¤","sushi_restaurant":"ìŠ¤ì‹œ ë ˆìŠ¤í† ë‘","tea_house":"ì°»ì§‘","thai_restaurant":"íƒœêµ­ ìŒì‹ì ","turkish_restaurant":"í„°í‚¤ ìŒì‹ì ","vegan_restaurant":"ë¹„ê±´ ë ˆìŠ¤í† ë‘","vegetarian_restaurant":"ì±„ì‹ ë ˆìŠ¤í† ë‘","vietnamese_restaurant":"ë² íŠ¸ë‚¨ ìŒì‹ì ","wine_bar":"ì™€ì¸ ë°”","administrative_area_level_1":"ê´‘ì—­ í–‰ì •êµ¬ì—­","administrative_area_level_2":"ì§€ë°© í–‰ì •êµ¬ì—­","country":"êµ­ê°€","locality":"ì§€ì—­","postal_code":"ìš°í¸ë²ˆí˜¸","school_district":"í•™êµ°","city_hall":"ì‹œì²­","courthouse":"ë²•ì›","embassy":"ëŒ€ì‚¬ê´€","fire_station":"ì†Œë°©ì„œ","government_office":"ì •ë¶€ ê¸°ê´€","local_government_office":"ì§€ë°© ì •ë¶€ ê¸°ê´€","neighborhood_police_station":"ì§€êµ¬ëŒ€ (ì¼ë³¸ë§Œ í•´ë‹¹)","police":"ê²½ì°°ì„œ","post_office":"ìš°ì²´êµ­","chiropractor":"ì¹´ì´ë¡œí”„ë™í‹±","dental_clinic":"ì¹˜ê³¼ í´ë¦¬ë‹‰","dentist":"ì¹˜ê³¼ ì˜ì‚¬","doctor":"ì˜ì‚¬","drugstore":"ì•½êµ­","hospital":"ë³‘ì›","massage":"ë§ˆì‚¬ì§€ìƒµ","medical_lab":"ì˜ë£Œ ì‹¤í—˜ì‹¤","pharmacy":"ì•½êµ­","physiotherapist":"ë¬¼ë¦¬ ì¹˜ë£Œì‚¬","sauna":"ì‚¬ìš°ë‚˜","skin_care_clinic":"í”¼ë¶€ ê´€ë¦¬ í´ë¦¬ë‹‰","spa":"ìŠ¤íŒŒ","tanning_studio":"íƒœë‹ ìŠ¤íŠœë””ì˜¤","wellness_center":"ì›°ë‹ˆìŠ¤ ì„¼í„°","yoga_studio":"ìš”ê°€ ìŠ¤íŠœë””ì˜¤","apartment_building":"ì•„íŒŒíŠ¸ ê±´ë¬¼","apartment_complex":"ì•„íŒŒíŠ¸ ë‹¨ì§€","condominium_complex":"ì½˜ë„ë¯¸ë‹ˆì—„ ë‹¨ì§€","housing_complex":"ì£¼íƒ ë‹¨ì§€","bed_and_breakfast":"B&B ìˆ™ì†Œ","budget_japanese_inn":"ì¼ë³¸ ì €ê°€ ìˆ™ì†Œ","campground":"ìº í•‘ì¥","camping_cabin":"ìº í•‘ìš© ì˜¤ë‘ë§‰","cottage":"ì½”í‹°ì§€","extended_stay_hotel":"ì¥ê¸° ì²´ë¥˜ í˜¸í…”","farmstay":"íŒœìŠ¤í…Œì´","guest_house":"ê²ŒìŠ¤íŠ¸í•˜ìš°ìŠ¤","hostel":"í˜¸ìŠ¤í…”","hotel":"í˜¸í…”","inn":"ì—¬ê´€","japanese_inn":"ë£Œì¹¸","lodging":"ìˆ™ë°•ì‹œì„¤","mobile_home_park":"ì´ë™ì‹ ì£¼íƒ ë‹¨ì§€","motel":"ëª¨í…”","private_guest_room":"ê°œì¸ ê²ŒìŠ¤íŠ¸ë£¸","resort_hotel":"ë¦¬ì¡°íŠ¸ í˜¸í…”","rv_park":"RV ì£¼ì°¨ì¥","beach":"í•´ë³€","church":"êµíšŒ","hindu_temple":"íŒë‘êµ ì‚¬ì›","mosque":"ëª¨ìŠ¤í¬","synagogue":"ìœ ëŒ€êµ íšŒë‹¹","astrologer":"ì ì„±ìˆ ì‚¬","barber_shop":"ì´ë°œì†Œ","beautician":"ë¯¸ìš© ì „ë¬¸ê°€","beauty_salon":"ë¯¸ìš©ì‹¤","body_art_service":"ë°”ë””ì•„íŠ¸ ì„œë¹„ìŠ¤","catering_service":"ì¶œì¥ ìš”ë¦¬ ì„œë¹„ìŠ¤","cemetery":"ê³µë™ë¬˜ì§€","child_care_agency":"ë³´ìœ¡ ê¸°ê´€","consultant":"ì»¨ì„¤íŒ… ì„œë¹„ìŠ¤","courier_service":"íƒë°° ì„œë¹„ìŠ¤","electrician":"ì „ê¸° ê¸°ì‚¬","florist":"ê½ƒì§‘","food_delivery":"ìŒì‹ ë°°ë‹¬ ì„œë¹„ìŠ¤","foot_care":"ë°œ ê´€ë¦¬ ì„œë¹„ìŠ¤","funeral_home":"ì¥ë¡€ì‹ì¥","hair_care":"í—¤ì–´ ê´€ë¦¬","hair_salon":"ë¯¸ìš©ì‹¤","insurance_agency":"ë³´í—˜ ëŒ€ë¦¬ì ","laundry":"ì„¸íƒì†Œ","lawyer":"ë³€í˜¸ì‚¬","locksmith":"ì—´ì‡  ìˆ˜ë¦¬ì ","makeup_artist":"ë©”ì´í¬ì—… ì•„í‹°ìŠ¤íŠ¸","moving_company":"ì´ì‚¬ ì—…ì²´","nail_salon":"ë„¤ì¼ìˆ","painter":"ë„ì¥ì—…ì²´","plumber":"ë°°ê´€ê³µ","psychic":"ì‹¬ë ¹ìˆ ì‚¬","real_estate_agency":"ë¶€ë™ì‚° ì¤‘ê°œì—…","roofing_contractor":"ì§€ë¶• ê³µì‚¬ì—…ì²´","storage":"ì°½ê³ ","summer_camp_organizer":"ì—¬ë¦„ ìº í”„ ê¸°íšì‚¬","tailor":"ì¬ë‹¨ì‚¬","telecommunications_service_provider":"í†µì‹  ì„œë¹„ìŠ¤ ì œê³µì—…ì²´","tour_agency":"ì—¬í–‰ì‚¬","tourist_information_center":"ê´€ê´‘ ì•ˆë‚´ì†Œ","travel_agency":"ì—¬í–‰ì‚¬","veterinary_care":"ë™ë¬¼ ë³‘ì›","asian_grocery_store":"ì•„ì‹œì•„ ì‹ë£Œí’ˆì ","auto_parts_store":"ìë™ì°¨ ë¶€í’ˆ ìƒì ","bicycle_store":"ìì „ê±° ê°€ê²Œ","book_store":"ì„œì ","butcher_shop":"ì •ìœ¡ì ","cell_phone_store":"íœ´ëŒ€í° ë§¤ì¥","clothing_store":"ì˜ë¥˜ ë§¤ì¥","convenience_store":"í¸ì˜ì ","department_store":"ë°±í™”ì ","discount_store":"í• ì¸ ë§¤ì¥","electronics_store":"ì „ìì œí’ˆ ë§¤ì¥","food_store":"ì‹ë£Œí’ˆì ","furniture_store":"ê°€êµ¬ ë§¤ì¥","gift_shop":"ê¸°ë…í’ˆ ê°€ê²Œ","grocery_store":"ìŠˆí¼ë§ˆì¼“","hardware_store":"ì² ë¬¼ì ","home_goods_store":"ìƒí™œìš©í’ˆ ë§¤ì¥","home_improvement_store":"DIY/ì¸í…Œë¦¬ì–´ ë§¤ì¥","jewelry_store":"ë³´ì„ ê°€ê²Œ","liquor_store":"ì£¼ë¥˜ íŒë§¤ì ","market":"ì‹œì¥","pet_store":"ì• ì™„ë™ë¬¼ ê°€ê²Œ","shoe_store":"ì‹ ë°œ ê°€ê²Œ","shopping_mall":"ì‡¼í•‘ëª°","sporting_goods_store":"ìŠ¤í¬ì¸  ìš©í’ˆì ","store":"ìƒì ","supermarket":"ëŒ€í˜• ë§ˆíŠ¸","warehouse_store":"ì°½ê³ í˜• ë§¤ì¥","wholesaler":"ë„ë§¤ì ","arena":"ê²½ê¸°ì¥","athletic_field":"ìš´ë™ì¥","fishing_charter":"ë‚šì‹œ ì—¬í–‰","fishing_pond":"ë‚šì‹œí„°","fitness_center":"í—¬ìŠ¤ì¥","golf_course":"ê³¨í”„ì¥","gym":"ì²´ìœ¡ê´€","ice_skating_rink":"ì•„ì´ìŠ¤ë§í¬","playground":"ë†€ì´í„°","ski_resort":"ìŠ¤í‚¤ ë¦¬ì¡°íŠ¸","sports_activity_location":"ìŠ¤í¬ì¸  í™œë™ ì¥ì†Œ","sports_club":"ìŠ¤í¬ì¸  í´ëŸ½","sports_coaching":"ìŠ¤í¬ì¸  ì½”ì¹­ ì„¼í„°","sports_complex":"ìŠ¤í¬ì¸  ë³µí•© ì‹œì„¤","stadium":"ìŠ¤íƒ€ë””ì›€","swimming_pool":"ìˆ˜ì˜ì¥","airport":"ê³µí•­","airstrip":"ì†Œí˜• ë¹„í–‰ì¥","bus_station":"ë²„ìŠ¤ í„°ë¯¸ë„","bus_stop":"ë²„ìŠ¤ ì •ë¥˜ì¥","ferry_terminal":"í˜ë¦¬ í„°ë¯¸ë„","heliport":"í—¬ë¦¬í¬íŠ¸","international_airport":"êµ­ì œê³µí•­","light_rail_station":"ê²½ì „ì²  ì—­","park_and_ride":"í™˜ìŠ¹ ì£¼ì°¨ì¥","subway_station":"ì§€í•˜ì² ì—­","taxi_stand":"íƒì‹œ ìŠ¹ê°•ì¥","train_station":"ê¸°ì°¨ì—­","transit_depot":"êµí†µ í™˜ìŠ¹ì„¼í„°","transit_station":"ëŒ€ì¤‘êµí†µ í™˜ìŠ¹ì—­","truck_stop":"íŠ¸ëŸ­ ì •ë¥˜ì¥","administrative_area_level_3":"í–‰ì •êµ¬ì—­ (ë ˆë²¨ 3)","administrative_area_level_4":"í–‰ì •êµ¬ì—­ (ë ˆë²¨ 4)","administrative_area_level_5":"í–‰ì •êµ¬ì—­ (ë ˆë²¨ 5)","administrative_area_level_6":"í–‰ì •êµ¬ì—­ (ë ˆë²¨ 6)","administrative_area_level_7":"í–‰ì •êµ¬ì—­ (ë ˆë²¨ 7)","archipelago":"êµ°ë„","colloquial_area":"ë¹„ê³µì‹ ì§€ì—­ëª…","continent":"ëŒ€ë¥™","establishment":"ì‹œì„¤","finance":"ê¸ˆìœµ","floor":"ì¸µ","food":"ìŒì‹","general_contractor":"ì¢…í•© ê±´ì„¤ì—…ì²´","geocode":"ì§€ë¦¬ì  ì½”ë“œ","health":"ê±´ê°•","intersection":"êµì°¨ë¡œ","landmark":"ëœë“œë§ˆí¬","natural_feature":"ìì—° ì§€í˜•","neighborhood":"ì£¼ë³€ ì§€ì—­","place_of_worship":"ì˜ˆë°° ì¥ì†Œ","plus_code":"í”ŒëŸ¬ìŠ¤ ì½”ë“œ","point_of_interest":"ê´€ì‹¬ ì§€ì ","political":"ì •ì¹˜ì  êµ¬ì—­","post_box":"ìš°í¸í•¨","postal_code_prefix":"ìš°í¸ë²ˆí˜¸ ì ‘ë‘ì‚¬","postal_code_suffix":"ìš°í¸ë²ˆí˜¸ ì ‘ë¯¸ì‚¬","postal_town":"ìš°í¸ë„ì‹œ","premise":"ê±´ë¬¼","room":"ë°©","route":"ê²½ë¡œ","street_address":"ë„ë¡œëª… ì£¼ì†Œ","street_number":"ë„ë¡œëª… ì£¼ì†Œ ë²ˆí˜¸","sublocality":"í•˜ìœ„ ì§€ì—­","sublocality_level_1":"í•˜ìœ„ ì§€ì—­ (ë ˆë²¨ 1)","sublocality_level_2":"í•˜ìœ„ ì§€ì—­ (ë ˆë²¨ 2)","sublocality_level_3":"í•˜ìœ„ ì§€ì—­ (ë ˆë²¨ 3)","sublocality_level_4":"í•˜ìœ„ ì§€ì—­ (ë ˆë²¨ 4)","sublocality_level_5":"í•˜ìœ„ ì§€ì—­ (ë ˆë²¨ 5)","subpremise":"ê±´ë¬¼ ë‚´ êµ¬ì—­","town_square":"íƒ€ìš´ ìŠ¤í€˜ì–´"};
    const excludedPlaceTypes=["administrative_area_level_1","administrative_area_level_2","administrative_area_level_3","administrative_area_level_4","administrative_area_level_5","administrative_area_level_6","administrative_area_level_7","colloquial_area","continent","country","locality","neighborhood","political","postal_code","postal_code_prefix","postal_code_suffix","postal_town","school_district","sublocality","sublocality_level_1","sublocality_level_2","sublocality_level_3","sublocality_level_4","sublocality_level_5","plus_code","establishment","floor","premise","subpremise","room","street_address","street_number","intersection","route","corporate_office","general_contractor","real_estate_agency","insurance_agency","lawyer","accounting","finance","storage","telecommunications_service_provider","moving_company","electrician","plumber","roofing_contractor","courier_service","warehouse_store","wholesaler","auto_parts_store","butcher_shop","beauty_salon","nail_salon","hair_salon","barber_shop","tanning_studio","makeup_artist","foot_care","psychic","astrologer","apartment_building","apartment_complex","condominium_complex","housing_complex","mobile_home_park","church","hindu_temple","mosque","synagogue","place_of_worship","chiropractor","physiotherapist","skin_care_clinic","medical_lab","wellness_center","child_care_agency","summer_camp_organizer","consultant","painter","tailor","point_of_interest"]



    document.addEventListener("DOMContentLoaded", initMap);

// â¡ï¸ ë‚˜ë“¤ì´ ì¥ì†Œ ê²€ìƒ‰ ê´€ë ¨
//===============================================================================


    function handleNadeuliKeyPress(event) {
        if (event.key === "Enter") {
            event.preventDefault();
            searchNadeuliPlaces();
        }
    }
    function searchNadeuliPlaces() {
        let query = document.getElementById("nadeuli-place-search").value;
        if (!query) return;

        $.ajax({
            url: "/api/places/search",
            type: "GET",
            data: { query: query },
            success: function (data) {
                let results = data.places || [];
                // displaySearchResults(results, "nadeuli");
            },
            error: function (error) {
                console.error("ë‚˜ë“¤ì´ ê²€ìƒ‰ ì˜¤ë¥˜:", error);
            }
        });
    }
    function clearNadeuliSearch() {
        document.getElementById("nadeuli-place-search").value = "";
        document.getElementById("nadeuli-search-results").innerHTML = "";
        document.getElementById("nadeuli-search-results-header").innerText = "ê²€ìƒ‰ ê²°ê³¼ ì´ 0ê±´";
    }



// â¡ï¸ êµ¬ê¸€ Place TextSearch ê´€ë ¨
//===============================================================================

    // êµ¬ê¸€ Place Text Search
    function searchGooglePlaces() {
        let query = document.getElementById("google-place-search").value;
        if (!query) return;

        let location = { lat: 33.4996, lng: 126.5312 }; // ì œì£¼ë„ ìœ„ë„, ê²½ë„
        let radius = 50000; // ë°˜ê²½ 50km

        $.ajax({
            url: "/api/google-places/search",
            type: "GET",
            data: {
                query: query,
                lat: location.lat,
                lng: location.lng,
                radius: radius
            },
            success: function (data) {
                try {
                    let parsedData = typeof data === "string" ? JSON.parse(data) : data; // JSON ë¬¸ìì—´ì¸ì§€ í™•ì¸ í›„ ë³€í™˜
                    let results = parsedData.places || []; // `places` í‚¤ì—ì„œ ë°ì´í„° ê°€ì ¸ì˜¤ê¸°
                    clearMarkers();
                    displayGoogleSearchResults(results);
                } catch (error) {
                    console.error("JSON parsing error:", error);
                }
            },
            error: function (error) {
                console.error("Error fetching data from backend:", error);
            }
        });
    }

    // êµ¬ê¸€ Place Text Search ê²°ê³¼ ì¶œë ¥
    function displayGoogleSearchResults(places) {
        let resultsContainer = document.getElementById(`google-search-results`);
        let resultsHeader = document.getElementById(`google-search-results-header`)

        resultsHeader.innerText = `ê²€ìƒ‰ ê²°ê³¼ ì´${places.length}ê±´`; // ê²€ìƒ‰ ê°œìˆ˜ ì—…ë°ì´íŠ¸
        resultsContainer.innerHTML = ""; // ê¸°ì¡´ ê²°ê³¼ ì´ˆê¸°í™”
        places.forEach((place) => {
            let placeName = place.displayName?.text || "ì´ë¦„ ì—†ìŒ";
            let address = place.formattedAddress || "ì£¼ì†Œ ì •ë³´ ì—†ìŒ";
            let location = new google.maps.LatLng(place.location.latitude, place.location.longitude);
            let placeId = place.id || ""; // placeId ì €ì¥

            let filteredTypes = place.types ? translatePlaceTypes(place.types) : [];
            let typesText = filteredTypes.length > 0 ? filteredTypes.join(", ") : "";

            let listItem = document.createElement("div");
            listItem.className = "google-result-item";
            listItem.setAttribute("data-id", placeId); // placeId ì €ì¥

            listItem.innerHTML = `
            <div class="google-result-content">
                <div class="google-result-title">${placeName}</div>
                <div class="google-result-address">${address}</div>
                <div class="google-result-tags">${typesText}</div>
            </div>
            <button class="btn btn-sm btn-secondary register-btn" onclick="registerPlace(this)">
                ë“±ë¡
            </button>
        `;

            listItem.onclick = () => selectGooglePlace(location);
            resultsContainer.appendChild(listItem);

            let marker = new google.maps.Marker({
                position: location,
                map: map,
                title: placeName,
            });
            markers.push(marker);
        });

        if (places.length > 0) {
            map.setCenter(new google.maps.LatLng(places[0].location.latitude, places[0].location.longitude));
        }
    }

    // êµ¬ê¸€ Place ì¥ì†Œíƒ€ì… í•œê¸€ ë³€í™˜ í•¨ìˆ˜
    function translatePlaceTypes(types) {
        return types
            .filter(type => !excludedPlaceTypes.includes(type)) // ì œì™¸ ë¦¬ìŠ¤íŠ¸ í•„í„°ë§
            .map(type => placeTypeTranslations[type] || `#${type.replace(/_/g, ' ')}`); // í•œê¸€ ë³€í™˜ or í•´ì‹œíƒœê·¸ ìŠ¤íƒ€ì¼
    }

    // êµ¬ê¸€ Place ê²€ìƒ‰ì°½ ì´ˆê¸°í™”
    function clearGoogleSearch() {
        document.getElementById("google-place-search").value = "";
        document.getElementById("google-search-results").innerHTML = "";
        document.getElementById("google-search-results-header").innerText = "ê²€ìƒ‰ ê²°ê³¼ ì´ 0ê±´";
        clearMarkers();
    }

    //êµ¬ê¸€ë§µ ë§ˆì»¤ì‚­ì œ
    function clearMarkers() {
        markers.forEach((marker) => marker.setMap(null));
        markers = [];
    }

    // êµ¬ê¸€ ì§€ì—­ ì„ íƒì‹œ ì§€ì—­ì´ë™
    function selectGooglePlace(location) {
        map.setCenter(location);
        map.setZoom(15);
    }

    // êµ¬ê¸€ Place -> ë‚˜ë“¤ì´ì„œë²„ ì¥ì†Œ ì¶”ê°€
    function registerPlace(button) {
        let listItem = button.closest(".google-result-item");
        let placeId = listItem.getAttribute("data-id"); // data-idì—ì„œ placeId ê°€ì ¸ì˜¤ê¸°
        let name = listItem.querySelector(".google-result-title").innerText;
        let address = listItem.querySelector(".google-result-address").innerText;

        if (!placeId) {
            alert("âŒ Place IDê°€ ì—†ìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
            return;
        }

        // 1ï¸âƒ£ ì‚¬ìš©ì í™•ì¸
        if (!confirm(`${name} ì¥ì†Œë¥¼ ë“±ë¡í•˜ì‹œê² ìŠµë‹ˆê¹Œ?`)) {
            return;
        }

        // 2ï¸âƒ£ ì¥ì†Œ ë“±ë¡ API í˜¸ì¶œ
        $.ajax({
            url: "/api/place/register",
            type: "POST",
            contentType: "application/json",
            data: JSON.stringify({
                placeId: placeId, // Google Place IDë¡œ ë“±ë¡
            }),
            success: function (response) {
                // 3ï¸âƒ£ ì„±ê³µ ì²˜ë¦¬
                if (response.status === 201) {
                    alert(`âœ… ì¥ì†Œê°€ ì„±ê³µì ìœ¼ë¡œ ë“±ë¡ë˜ì—ˆìŠµë‹ˆë‹¤: ${name}`);
                } else if (response.status === 200) {
                    alert(`âš  ì´ë¯¸ ë“±ë¡ëœ ì¥ì†Œì…ë‹ˆë‹¤: ${name}`);
                }
            },
            error: function (error) {
                // 4ï¸âƒ£ ì‹¤íŒ¨ ì²˜ë¦¬
                console.error("ğŸš¨ ì¥ì†Œ ë“±ë¡ ì‹¤íŒ¨:", error);
                alert("âŒ ì¥ì†Œ ë“±ë¡ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤. ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.");
            }
        });
    }

    //êµ¬ê¸€ ê²€ìƒ‰ì°½ì—ì„œ ì—”í„°í‚¤ ëˆ„ë¥¼ì‹œ ê²€ìƒ‰
    function handleGoogleKeyPress(event) {
        if (event.key === "Enter") {
            event.preventDefault();
            searchGooglePlaces();
        }
    }





// â¡ï¸ ê¸°íƒ€ ìœ í‹¸ë¦¬í‹°
//=======================================================================

    // ì¥ì†Œì¶”ê°€ íƒ­ ë³€ê²½
    function showTab(tabId) {
        // ëª¨ë“  íƒ­ ìˆ¨ê¸°ê¸°
        document.querySelectorAll(".tab-pane").forEach(tab => {
            tab.classList.remove("active");
        });

        // ì„ íƒí•œ íƒ­ í™œì„±í™”
        document.getElementById(tabId).classList.add("active");

        // ëª¨ë“  íƒ­ ë²„íŠ¼ì—ì„œ active ì œê±°
        document.querySelectorAll(".tab-button").forEach(button => {
            button.classList.remove("active");
        });

        // ì„ íƒí•œ ë²„íŠ¼ í™œì„±í™”
        if (tabId === "nadeuli-search-tab") {
            document.getElementById("nadeuli-tab-btn").classList.add("active");
        } else {
            document.getElementById("google-tab-btn").classList.add("active");
        }
    }

    // ë§µ ì´ˆê¸°í™”
    function initMap() {
        map = new google.maps.Map(document.getElementById("map"), {
            center: { lat: 37.5665, lng: 126.9780 },
            zoom: 13,
        });
    }

    // êµ¬ê¸€ Place apií‚¤ GITHUB ë° ê²€ìƒ‰ì—”ì§„ì—ì„œ ìˆ¨ê¸°ê¸° ìœ„í•œ í•¨ìˆ˜
    function loadGoogleMapsApi() {
        fetch('/api/google-places/apikey')
            .then(response => response.text())
            .then(apiKey => {
                let script = document.createElement("script");
                script.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}&libraries=places&callback=initMap`;
                script.async = true;
                script.defer = true;
                document.head.appendChild(script);
            })
            .catch(error => console.error("API Key ê°€ì ¸ì˜¤ê¸° ì‹¤íŒ¨:", error));
    }



</script>
</body>
</html>