<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ïû•ÏÜå Ï∂îÍ∞Ä</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css">
    <style>
        html, body {
            height: 100%;
            margin: 0;
            overflow: hidden; /* Ïä§ÌÅ¨Î°§ Ï†úÍ±∞ */
        }

        .container {
            margin: 0;
            width: 500px;
            height: 100vh;
            display: flex;
            flex-direction: column;
        }

        .tab-content-wrap {
            flex-grow: 1;
            display: flex;
            height: 100%;
        }

        .search-area {
            width: 100%;
            margin: 0;
            padding: 20px;
            border-right: 2px solid #ddd;
            flex-shrink: 0;
            display: flex;
            flex-direction: column;
            height: 100%;
        }

        .search-container {
            display: flex;
            align-items: center;
            width: 100%;
            min-height: 50px;
            height: 50px;
            background-color: #ffffff;
            border-radius: 25px;
            border: 1px solid #ddd;
            padding: 0 15px;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
            position: relative;
        }
        .search-icon, .search-clear {
            display: flex;
            align-items: center;
            justify-content: center;
            width: 40px;
            font-size: 16px;
            user-select: none;
            color: #666;
            cursor: pointer;
        }
        .search-input {
            flex-grow: 1;
            border: none;
            background-color: transparent;
            height: 100%;
            font-size: 1em;
            padding: 0 10px;
        }
        .search-input:focus {
            outline: none;
        }

        .map-area {
            height: 200px; /* ÏßÄÎèÑ ÏòÅÏó≠ Í≥†Ï†ï ÎÜíÏù¥ */
            margin-top: 10px;
        }
        #map {
            width: 100%;
            height: 200px;
        }

        .search-results-header {
            font-weight: bold;
            font-size: 1rem;
            text-align: center;
            padding: 15px 10px 5px 10px;
        }

        .search-results-wrap {
            flex-grow: 1;
            overflow-y: auto;
        }

        #google-search-results {
            min-height: 100px;
            padding: 10px;
            background-color: #f3f3f3;
        }

        .google-result-item {
            display: flex;
            align-items: center;
            gap: 15px;
            padding: 13px 13px;
            margin-bottom: 8px;
            border-radius: 8px;
            background: white;
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1);
        }

        .google-result-content {
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            gap: 5px;
        }

        .google-result-title {
            font-size: 1rem;
            font-weight: bold;
            color: #333;
        }

        .google-result-address {
            font-size: 0.8rem;
            color: #666;
        }

        .google-result-tags {
            font-size: 0.9rem;
            color: #555;
            font-weight: normal;
        }

        .google-register-btn {
            padding: 5px 10px;
            font-size: 0.8rem;
            white-space: nowrap;
        }


        /* ‚úÖ ÌÉ≠ Î≤ÑÌäº Ïä§ÌÉÄÏùº */
        .custom-tabs {
            display: flex;
            width: 100%;
            border-bottom: 2px solid #ddd;
        }

        .tab-button {
            flex: 1; /* ÎÑàÎπÑÎ•º 1/2Ïî© */
            padding: 15px;
            text-align: center;
            cursor: pointer;
            font-size: 1rem;
            font-weight: bold;
            background-color: white;
            border: none;
            border-bottom: 2px solid transparent;
            transition: border-bottom 0.3s;
        }

        .tab-button.active {
            border-bottom: 2px solid #007bff; /* ÌôúÏÑ± ÌÉ≠ ÌëúÏãú */
        }

        .tab-content {
            width: 100%;
        }

        .tab-pane {
            height: 100%;
            display: none; /* Í∏∞Î≥∏Ï†ÅÏúºÎ°ú Ïà®ÍπÄ */
        }

        .tab-pane.active {
            display: block; /* ÌôúÏÑ±ÌôîÎêú ÌÉ≠Îßå ÌëúÏãú */
        }
    </style>
</head>
<body onload="loadGoogleMapsApi()">
<div class="container">
    <!-- ‚úÖ Ïª§Ïä§ÌÖÄ ÌÉ≠ Î≤ÑÌäº -->
    <div class="custom-tabs">
        <button class="tab-button active" id="nadeuli-tab-btn" onclick="showTab('nadeuli-search-tab')">Ï∂îÏ≤ú Ïû•ÏÜå Í≤ÄÏÉâ</button>
        <button class="tab-button" id="google-tab-btn" onclick="showTab('google-search-tab')">ÎØ∏Îì±Î°ù Ïû•ÏÜå Ï∂îÍ∞Ä</button>
    </div>

    <div class="tab-content-wrap">
        <div class="tab-content">
            <!-- ‚úÖ ÎÇòÎì§Ïù¥ ÏÑúÎ≤Ñ Í≤ÄÏÉâ ÌÉ≠ -->
            <div class="tab-pane active" id="nadeuli-search-tab">
                <div class="search-area">
                    <div class="search-container">
                        <span class="search-icon" onclick="searchNadeuliPlaces()"><i class="bi bi-search"></i></span>
                        <input type="text" id="nadeuli-place-search" class="search-input" placeholder="ÎÇòÎì§Ïù¥ Ïû•ÏÜå Í≤ÄÏÉâ" autocomplete="off" onkeydown="handleNadeuliKeyPress(event)" />
                        <span class="search-clear" onclick="clearNadeuliSearch()"><i class="bi bi-x"></i></span>
                    </div>
                    <div class="search-results-wrap">
                        <div id="nadeuli-search-results" class="list-group"></div>
                    </div>
                </div>
            </div>

            <!-- ‚úÖ Google Í≤ÄÏÉâ ÌÉ≠ -->
            <div class="tab-pane" id="google-search-tab">
                <div class="search-area">
                    <div class="search-container">
                        <span class="search-icon" onclick="searchGooglePlaces()"><i class="bi bi-search"></i></span>
                        <input type="text" id="google-place-search" class="search-input" placeholder="Google Ïû•ÏÜå Í≤ÄÏÉâ" autocomplete="off" onkeydown="handleGoogleKeyPress(event)" />
                        <span class="search-clear" onclick="clearGoogleSearch()"><i class="bi bi-x"></i></span>
                    </div>
                    <div class="map-area">
                        <div id="map"></div>
                    </div>
                    <div id="google-search-results-header" class="search-results-header">Í≤ÄÏÉâ Í≤∞Í≥º Ï¥ù 0Í±¥</div>
                    <div class="search-results-wrap">
                        <div id="google-search-results" class="list-group"></div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>


<script>
    let map;
    let markers = [];
    const placeTypeTranslations={"car_dealer":"ÏûêÎèôÏ∞® ÎîúÎü¨","car_rental":"Î†åÌÑ∞Ïπ¥","car_repair":"ÏûêÎèôÏ∞® Ï†ïÎπÑÏÜå","car_wash":"ÏÑ∏Ï∞®Ïû•","electric_vehicle_charging_station":"Ï†ÑÍ∏∞Ï∞® Ï∂©Ï†ÑÏÜå","gas_station":"Ï£ºÏú†ÏÜå","parking":"Ï£ºÏ∞®Ïû•","rest_stop":"Ìú¥Í≤åÏÜå","corporate_office":"Í∏∞ÏóÖ ÏÇ¨Î¨¥Ïã§","farm":"ÎÜçÏû•","ranch":"Î™©Ïû•","art_gallery":"ÎØ∏Ïà†Í¥Ä","art_studio":"ÏòàÏà† ÏûëÏóÖÏã§","auditorium":"Í∞ïÎãπ","cultural_landmark":"Î¨∏Ìôî ÎûúÎìúÎßàÌÅ¨","historical_place":"Ïú†Ï†ÅÏßÄ","monument":"Í∏∞ÎÖêÎπÑ","museum":"Î∞ïÎ¨ºÍ¥Ä","performing_arts_theater":"Í≥µÏó∞ ÏòàÏà† Í∑πÏû•","sculpture":"Ï°∞Í∞ÅÏÉÅ","library":"ÎèÑÏÑúÍ¥Ä","preschool":"Ïú†ÏπòÏõê","primary_school":"Ï¥àÎì±ÌïôÍµê","school":"ÌïôÍµê","secondary_school":"Ï§ë¬∑Í≥†Îì±ÌïôÍµê","university":"ÎåÄÌïôÍµê","adventure_sports_center":"ÏùµÏä§Ìä∏Î¶º Ïä§Ìè¨Ï∏† ÏÑºÌÑ∞","amphitheatre":"ÏõêÌòï Í∑πÏû•","amusement_center":"Ïò§ÎùΩ ÏÑºÌÑ∞","amusement_park":"ÎÜÄÏù¥Í≥µÏõê","aquarium":"ÏàòÏ°±Í¥Ä","banquet_hall":"Ïó∞ÌöåÏû•","barbecue_area":"Î∞îÎ≤†ÌÅê Íµ¨Ïó≠","botanical_garden":"ÏãùÎ¨ºÏõê","bowling_alley":"Î≥ºÎßÅÏû•","casino":"Ïπ¥ÏßÄÎÖ∏","childrens_camp":"Ïñ¥Î¶∞Ïù¥ Ï∫†ÌîÑ","comedy_club":"ÏΩîÎØ∏Îîî ÌÅ¥ÎüΩ","community_center":"Ïª§ÎÆ§ÎãàÌã∞ ÏÑºÌÑ∞","concert_hall":"ÏΩòÏÑúÌä∏ ÌôÄ","convention_center":"Ïª®Î≤§ÏÖò ÏÑºÌÑ∞","cultural_center":"Î¨∏Ìôî ÏÑºÌÑ∞","cycling_park":"ÏûêÏ†ÑÍ±∞ Í≥µÏõê","dance_hall":"ÎåÑÏä§ÌôÄ","dog_park":"Ïï†Í≤¨ Í≥µÏõê","event_venue":"Ïù¥Î≤§Ìä∏ Ïû•ÏÜå","ferris_wheel":"ÎåÄÍ¥ÄÎûåÏ∞®","garden":"Ï†ïÏõê","hiking_area":"Îì±ÏÇ∞Î°ú","historical_landmark":"Ïó≠ÏÇ¨Ï†Å ÎûúÎìúÎßàÌÅ¨","internet_cafe":"Ïù∏ÌÑ∞ÎÑ∑ Ïπ¥Ìéò","karaoke":"ÎÖ∏ÎûòÎ∞©","marina":"ÎßàÎ¶¨ÎÇò (Ìï≠Íµ¨)","movie_rental":"ÎπÑÎîîÏò§ ÎåÄÏó¨Ï†ê","movie_theater":"ÏòÅÌôîÍ¥Ä","national_park":"Íµ≠Î¶ΩÍ≥µÏõê","night_club":"ÎÇòÏù¥Ìä∏ÌÅ¥ÎüΩ","observation_deck":"Ï†ÑÎßùÎåÄ","off_roading_area":"Ïò§ÌîÑÎ°úÎìú ÏßÄÏó≠","opera_house":"Ïò§ÌéòÎùº ÌïòÏö∞Ïä§","park":"Í≥µÏõê","philharmonic_hall":"ÌïÑÌïòÎ™®Îãâ ÌôÄ","picnic_ground":"ÏÜåÌíç Ïû•ÏÜå","planetarium":"Ï≤úÎ¨∏Í¥Ä","plaza":"Í¥ëÏû•","roller_coaster":"Î°§Îü¨ÏΩîÏä§ÌÑ∞","skateboard_park":"Ïä§ÏºÄÏù¥Ìä∏ Í≥µÏõê","state_park":"Ï£ºÎ¶ΩÍ≥µÏõê","tourist_attraction":"Í¥ÄÍ¥ëÎ™ÖÏÜå","video_arcade":"ÎπÑÎîîÏò§ ÏïÑÏºÄÏù¥Îìú","visitor_center":"Î∞©Î¨∏Ïûê ÏÑºÌÑ∞","water_park":"ÏõåÌÑ∞ÌååÌÅ¨","wedding_venue":"Ïõ®Îî©ÌôÄ","wildlife_park":"ÏïºÏÉùÎèôÎ¨º Í≥µÏõê","wildlife_refuge":"ÏïºÏÉùÎèôÎ¨º Î≥¥Ìò∏Íµ¨Ïó≠","zoo":"ÎèôÎ¨ºÏõê","public_bath":"ÎåÄÏ§ëÎ™©ÏöïÌÉï","public_bathroom":"Í≥µÏ§ëÌôîÏû•Ïã§","stable":"ÎßàÍµ¨Í∞Ñ","accounting":"ÌöåÍ≥Ñ ÏÇ¨Î¨¥ÏÜå","atm":"ATM","bank":"ÏùÄÌñâ","acai_shop":"ÏïÑÏÇ¨Ïù¥ Î≥º Ï†ÑÎ¨∏Ï†ê","afghani_restaurant":"ÏïÑÌîÑÍ∞ÄÎãàÏä§ÌÉÑ ÏùåÏãùÏ†ê","african_restaurant":"ÏïÑÌîÑÎ¶¨Ïπ¥ ÏùåÏãùÏ†ê","american_restaurant":"ÏïÑÎ©îÎ¶¨Ïπ∏ Î†àÏä§ÌÜ†Îûë","asian_restaurant":"ÏïÑÏãúÏïà Î†àÏä§ÌÜ†Îûë","bagel_shop":"Î≤†Ïù¥Í∏Ä Í∞ÄÍ≤å","bakery":"Î≤†Ïù¥Ïª§Î¶¨","bar":"Î∞î","bar_and_grill":"Î∞î & Í∑∏Î¶¥","barbecue_restaurant":"Î∞îÎ≤†ÌÅê Î†àÏä§ÌÜ†Îûë","brazilian_restaurant":"Î∏åÎùºÏßà ÏùåÏãùÏ†ê","breakfast_restaurant":"Ï°∞Ïãù Ï†ÑÎ¨∏Ï†ê","brunch_restaurant":"Î∏åÎü∞Ïπò Î†àÏä§ÌÜ†Îûë","buffet_restaurant":"Î∑îÌéò Î†àÏä§ÌÜ†Îûë","cafe":"Ïπ¥Ìéò","cafeteria":"Íµ¨ÎÇ¥ÏãùÎãπ","candy_store":"Ï∫îÎîîÏÉµ","cat_cafe":"Í≥†ÏñëÏù¥ Ïπ¥Ìéò","chinese_restaurant":"Ï§ëÏãùÎãπ","chocolate_factory":"Ï¥àÏΩúÎ¶ø Í≥µÏû•","chocolate_shop":"Ï¥àÏΩúÎ¶ø Í∞ÄÍ≤å","coffee_shop":"Ïª§ÌîºÏàç","confectionery":"Í≥ºÏûêÏ†ê","deli":"Îç∏Î¶¨","dessert_restaurant":"ÎîîÏ†ÄÌä∏ Î†àÏä§ÌÜ†Îûë","dessert_shop":"ÎîîÏ†ÄÌä∏ Í∞ÄÍ≤å","diner":"Îã§Ïù¥ÎÑà","dog_cafe":"Í∞ïÏïÑÏßÄ Ïπ¥Ìéò","donut_shop":"ÎèÑÎÑõ Í∞ÄÍ≤å","fast_food_restaurant":"Ìå®Ïä§Ìä∏Ìë∏ÎìúÏ†ê","fine_dining_restaurant":"ÌååÏù∏Îã§Ïù¥Îãù Î†àÏä§ÌÜ†Îûë","food_court":"Ìë∏ÎìúÏΩîÌä∏","french_restaurant":"ÌîÑÎûëÏä§ ÏùåÏãùÏ†ê","greek_restaurant":"Í∑∏Î¶¨Ïä§ ÏùåÏãùÏ†ê","hamburger_restaurant":"ÌñÑÎ≤ÑÍ±∞ Í∞ÄÍ≤å","ice_cream_shop":"ÏïÑÏù¥Ïä§ÌÅ¨Î¶º Í∞ÄÍ≤å","indian_restaurant":"Ïù∏ÎèÑ ÏùåÏãùÏ†ê","indonesian_restaurant":"Ïù∏ÎèÑÎÑ§ÏãúÏïÑ ÏùåÏãùÏ†ê","italian_restaurant":"Ïù¥ÌÉàÎ¶¨ÏïÑ ÏùåÏãùÏ†ê","japanese_restaurant":"ÏùºÏãùÎãπ","juice_shop":"Ï£ºÏä§ Ï†ÑÎ¨∏Ï†ê","korean_restaurant":"ÌïúÏãùÎãπ","lebanese_restaurant":"Î†àÎ∞îÎÖº ÏùåÏãùÏ†ê","meal_delivery":"Î∞∞Îã¨ Ï†ÑÎ¨∏Ï†ê","meal_takeaway":"ÌÖåÏù¥ÌÅ¨ÏïÑÏõÉ Ï†ÑÎ¨∏Ï†ê","mediterranean_restaurant":"ÏßÄÏ§ëÌï¥ ÏùåÏãùÏ†ê","mexican_restaurant":"Î©ïÏãúÏΩî ÏùåÏãùÏ†ê","middle_eastern_restaurant":"Ï§ëÎèô ÏùåÏãùÏ†ê","pizza_restaurant":"ÌîºÏûê Í∞ÄÍ≤å","pub":"Ìéç","ramen_restaurant":"ÎùºÎ©ò Ï†ÑÎ¨∏Ï†ê","restaurant":"Î†àÏä§ÌÜ†Îûë","sandwich_shop":"ÏÉåÎìúÏúÑÏπò Í∞ÄÍ≤å","seafood_restaurant":"Ìï¥ÏÇ∞Î¨º Î†àÏä§ÌÜ†Îûë","spanish_restaurant":"Ïä§ÌéòÏù∏ ÏùåÏãùÏ†ê","steak_house":"Ïä§ÌÖåÏù¥ÌÅ¨ ÌïòÏö∞Ïä§","sushi_restaurant":"Ïä§Ïãú Î†àÏä§ÌÜ†Îûë","tea_house":"Ï∞ªÏßë","thai_restaurant":"ÌÉúÍµ≠ ÏùåÏãùÏ†ê","turkish_restaurant":"ÌÑ∞ÌÇ§ ÏùåÏãùÏ†ê","vegan_restaurant":"ÎπÑÍ±¥ Î†àÏä§ÌÜ†Îûë","vegetarian_restaurant":"Ï±ÑÏãù Î†àÏä§ÌÜ†Îûë","vietnamese_restaurant":"Î≤†Ìä∏ÎÇ® ÏùåÏãùÏ†ê","wine_bar":"ÏôÄÏù∏ Î∞î","administrative_area_level_1":"Í¥ëÏó≠ ÌñâÏ†ïÍµ¨Ïó≠","administrative_area_level_2":"ÏßÄÎ∞© ÌñâÏ†ïÍµ¨Ïó≠","country":"Íµ≠Í∞Ä","locality":"ÏßÄÏó≠","postal_code":"Ïö∞Ìé∏Î≤àÌò∏","school_district":"ÌïôÍµ∞","city_hall":"ÏãúÏ≤≠","courthouse":"Î≤ïÏõê","embassy":"ÎåÄÏÇ¨Í¥Ä","fire_station":"ÏÜåÎ∞©ÏÑú","government_office":"Ï†ïÎ∂Ä Í∏∞Í¥Ä","local_government_office":"ÏßÄÎ∞© Ï†ïÎ∂Ä Í∏∞Í¥Ä","neighborhood_police_station":"ÏßÄÍµ¨ÎåÄ (ÏùºÎ≥∏Îßå Ìï¥Îãπ)","police":"Í≤ΩÏ∞∞ÏÑú","post_office":"Ïö∞Ï≤¥Íµ≠","chiropractor":"Ïπ¥Ïù¥Î°úÌîÑÎûôÌã±","dental_clinic":"ÏπòÍ≥º ÌÅ¥Î¶¨Îãâ","dentist":"ÏπòÍ≥º ÏùòÏÇ¨","doctor":"ÏùòÏÇ¨","drugstore":"ÏïΩÍµ≠","hospital":"Î≥ëÏõê","massage":"ÎßàÏÇ¨ÏßÄÏÉµ","medical_lab":"ÏùòÎ£å Ïã§ÌóòÏã§","pharmacy":"ÏïΩÍµ≠","physiotherapist":"Î¨ºÎ¶¨ ÏπòÎ£åÏÇ¨","sauna":"ÏÇ¨Ïö∞ÎÇò","skin_care_clinic":"ÌîºÎ∂Ä Í¥ÄÎ¶¨ ÌÅ¥Î¶¨Îãâ","spa":"Ïä§Ìåå","tanning_studio":"ÌÉúÎãù Ïä§ÌäúÎîîÏò§","wellness_center":"Ïõ∞ÎãàÏä§ ÏÑºÌÑ∞","yoga_studio":"ÏöîÍ∞Ä Ïä§ÌäúÎîîÏò§","apartment_building":"ÏïÑÌååÌä∏ Í±¥Î¨º","apartment_complex":"ÏïÑÌååÌä∏ Îã®ÏßÄ","condominium_complex":"ÏΩòÎèÑÎØ∏ÎãàÏóÑ Îã®ÏßÄ","housing_complex":"Ï£ºÌÉù Îã®ÏßÄ","bed_and_breakfast":"B&B ÏàôÏÜå","budget_japanese_inn":"ÏùºÎ≥∏ Ï†ÄÍ∞Ä ÏàôÏÜå","campground":"Ï∫†ÌïëÏû•","camping_cabin":"Ï∫†ÌïëÏö© Ïò§ÎëêÎßâ","cottage":"ÏΩîÌã∞ÏßÄ","extended_stay_hotel":"Ïû•Í∏∞ Ï≤¥Î•ò Ìò∏ÌÖî","farmstay":"ÌåúÏä§ÌÖåÏù¥","guest_house":"Í≤åÏä§Ìä∏ÌïòÏö∞Ïä§","hostel":"Ìò∏Ïä§ÌÖî","hotel":"Ìò∏ÌÖî","inn":"Ïó¨Í¥Ä","japanese_inn":"Î£åÏπ∏","lodging":"ÏàôÎ∞ïÏãúÏÑ§","mobile_home_park":"Ïù¥ÎèôÏãù Ï£ºÌÉù Îã®ÏßÄ","motel":"Î™®ÌÖî","private_guest_room":"Í∞úÏù∏ Í≤åÏä§Ìä∏Î£∏","resort_hotel":"Î¶¨Ï°∞Ìä∏ Ìò∏ÌÖî","rv_park":"RV Ï£ºÏ∞®Ïû•","beach":"Ìï¥Î≥Ä","church":"ÍµêÌöå","hindu_temple":"ÌûåÎëêÍµê ÏÇ¨Ïõê","mosque":"Î™®Ïä§ÌÅ¨","synagogue":"Ïú†ÎåÄÍµê ÌöåÎãπ","astrologer":"Ï†êÏÑ±Ïà†ÏÇ¨","barber_shop":"Ïù¥Î∞úÏÜå","beautician":"ÎØ∏Ïö© Ï†ÑÎ¨∏Í∞Ä","beauty_salon":"ÎØ∏Ïö©Ïã§","body_art_service":"Î∞îÎîîÏïÑÌä∏ ÏÑúÎπÑÏä§","catering_service":"Ï∂úÏû• ÏöîÎ¶¨ ÏÑúÎπÑÏä§","cemetery":"Í≥µÎèôÎ¨òÏßÄ","child_care_agency":"Î≥¥Ïú° Í∏∞Í¥Ä","consultant":"Ïª®ÏÑ§ÌåÖ ÏÑúÎπÑÏä§","courier_service":"ÌÉùÎ∞∞ ÏÑúÎπÑÏä§","electrician":"Ï†ÑÍ∏∞ Í∏∞ÏÇ¨","florist":"ÍΩÉÏßë","food_delivery":"ÏùåÏãù Î∞∞Îã¨ ÏÑúÎπÑÏä§","foot_care":"Î∞ú Í¥ÄÎ¶¨ ÏÑúÎπÑÏä§","funeral_home":"Ïû•Î°ÄÏãùÏû•","hair_care":"Ìó§Ïñ¥ Í¥ÄÎ¶¨","hair_salon":"ÎØ∏Ïö©Ïã§","insurance_agency":"Î≥¥Ìóò ÎåÄÎ¶¨Ï†ê","laundry":"ÏÑ∏ÌÉÅÏÜå","lawyer":"Î≥ÄÌò∏ÏÇ¨","locksmith":"Ïó¥Ïá† ÏàòÎ¶¨Ï†ê","makeup_artist":"Î©îÏù¥ÌÅ¨ÏóÖ ÏïÑÌã∞Ïä§Ìä∏","moving_company":"Ïù¥ÏÇ¨ ÏóÖÏ≤¥","nail_salon":"ÎÑ§ÏùºÏàç","painter":"ÎèÑÏû•ÏóÖÏ≤¥","plumber":"Î∞∞Í¥ÄÍ≥µ","psychic":"Ïã¨Î†πÏà†ÏÇ¨","real_estate_agency":"Î∂ÄÎèôÏÇ∞ Ï§ëÍ∞úÏóÖ","roofing_contractor":"ÏßÄÎ∂ï Í≥µÏÇ¨ÏóÖÏ≤¥","storage":"Ï∞ΩÍ≥†","summer_camp_organizer":"Ïó¨Î¶Ñ Ï∫†ÌîÑ Í∏∞ÌöçÏÇ¨","tailor":"Ïû¨Îã®ÏÇ¨","telecommunications_service_provider":"ÌÜµÏã† ÏÑúÎπÑÏä§ Ï†úÍ≥µÏóÖÏ≤¥","tour_agency":"Ïó¨ÌñâÏÇ¨","tourist_information_center":"Í¥ÄÍ¥ë ÏïàÎÇ¥ÏÜå","travel_agency":"Ïó¨ÌñâÏÇ¨","veterinary_care":"ÎèôÎ¨º Î≥ëÏõê","asian_grocery_store":"ÏïÑÏãúÏïÑ ÏãùÎ£åÌíàÏ†ê","auto_parts_store":"ÏûêÎèôÏ∞® Î∂ÄÌíà ÏÉÅÏ†ê","bicycle_store":"ÏûêÏ†ÑÍ±∞ Í∞ÄÍ≤å","book_store":"ÏÑúÏ†ê","butcher_shop":"Ï†ïÏú°Ï†ê","cell_phone_store":"Ìú¥ÎåÄÌè∞ Îß§Ïû•","clothing_store":"ÏùòÎ•ò Îß§Ïû•","convenience_store":"Ìé∏ÏùòÏ†ê","department_store":"Î∞±ÌôîÏ†ê","discount_store":"Ìï†Ïù∏ Îß§Ïû•","electronics_store":"Ï†ÑÏûêÏ†úÌíà Îß§Ïû•","food_store":"ÏãùÎ£åÌíàÏ†ê","furniture_store":"Í∞ÄÍµ¨ Îß§Ïû•","gift_shop":"Í∏∞ÎÖêÌíà Í∞ÄÍ≤å","grocery_store":"ÏäàÌçºÎßàÏºì","hardware_store":"Ï≤†Î¨ºÏ†ê","home_goods_store":"ÏÉùÌôúÏö©Ìíà Îß§Ïû•","home_improvement_store":"DIY/Ïù∏ÌÖåÎ¶¨Ïñ¥ Îß§Ïû•","jewelry_store":"Î≥¥ÏÑù Í∞ÄÍ≤å","liquor_store":"Ï£ºÎ•ò ÌåêÎß§Ï†ê","market":"ÏãúÏû•","pet_store":"Ïï†ÏôÑÎèôÎ¨º Í∞ÄÍ≤å","shoe_store":"Ïã†Î∞ú Í∞ÄÍ≤å","shopping_mall":"ÏáºÌïëÎ™∞","sporting_goods_store":"Ïä§Ìè¨Ï∏† Ïö©ÌíàÏ†ê","store":"ÏÉÅÏ†ê","supermarket":"ÎåÄÌòï ÎßàÌä∏","warehouse_store":"Ï∞ΩÍ≥†Ìòï Îß§Ïû•","wholesaler":"ÎèÑÎß§Ï†ê","arena":"Í≤ΩÍ∏∞Ïû•","athletic_field":"Ïö¥ÎèôÏû•","fishing_charter":"ÎÇöÏãú Ïó¨Ìñâ","fishing_pond":"ÎÇöÏãúÌÑ∞","fitness_center":"Ìó¨Ïä§Ïû•","golf_course":"Í≥®ÌîÑÏû•","gym":"Ï≤¥Ïú°Í¥Ä","ice_skating_rink":"ÏïÑÏù¥Ïä§ÎßÅÌÅ¨","playground":"ÎÜÄÏù¥ÌÑ∞","ski_resort":"Ïä§ÌÇ§ Î¶¨Ï°∞Ìä∏","sports_activity_location":"Ïä§Ìè¨Ï∏† ÌôúÎèô Ïû•ÏÜå","sports_club":"Ïä§Ìè¨Ï∏† ÌÅ¥ÎüΩ","sports_coaching":"Ïä§Ìè¨Ï∏† ÏΩîÏπ≠ ÏÑºÌÑ∞","sports_complex":"Ïä§Ìè¨Ï∏† Î≥µÌï© ÏãúÏÑ§","stadium":"Ïä§ÌÉÄÎîîÏõÄ","swimming_pool":"ÏàòÏòÅÏû•","airport":"Í≥µÌï≠","airstrip":"ÏÜåÌòï ÎπÑÌñâÏû•","bus_station":"Î≤ÑÏä§ ÌÑ∞ÎØ∏ÎÑê","bus_stop":"Î≤ÑÏä§ Ï†ïÎ•òÏû•","ferry_terminal":"ÌéòÎ¶¨ ÌÑ∞ÎØ∏ÎÑê","heliport":"Ìó¨Î¶¨Ìè¨Ìä∏","international_airport":"Íµ≠Ï†úÍ≥µÌï≠","light_rail_station":"Í≤ΩÏ†ÑÏ≤† Ïó≠","park_and_ride":"ÌôòÏäπ Ï£ºÏ∞®Ïû•","subway_station":"ÏßÄÌïòÏ≤†Ïó≠","taxi_stand":"ÌÉùÏãú ÏäπÍ∞ïÏû•","train_station":"Í∏∞Ï∞®Ïó≠","transit_depot":"ÍµêÌÜµ ÌôòÏäπÏÑºÌÑ∞","transit_station":"ÎåÄÏ§ëÍµêÌÜµ ÌôòÏäπÏó≠","truck_stop":"Ìä∏Îü≠ Ï†ïÎ•òÏû•","administrative_area_level_3":"ÌñâÏ†ïÍµ¨Ïó≠ (Î†àÎ≤® 3)","administrative_area_level_4":"ÌñâÏ†ïÍµ¨Ïó≠ (Î†àÎ≤® 4)","administrative_area_level_5":"ÌñâÏ†ïÍµ¨Ïó≠ (Î†àÎ≤® 5)","administrative_area_level_6":"ÌñâÏ†ïÍµ¨Ïó≠ (Î†àÎ≤® 6)","administrative_area_level_7":"ÌñâÏ†ïÍµ¨Ïó≠ (Î†àÎ≤® 7)","archipelago":"Íµ∞ÎèÑ","colloquial_area":"ÎπÑÍ≥µÏãù ÏßÄÏó≠Î™Ö","continent":"ÎåÄÎ•ô","establishment":"ÏãúÏÑ§","finance":"Í∏àÏúµ","floor":"Ï∏µ","food":"ÏùåÏãù","general_contractor":"Ï¢ÖÌï© Í±¥ÏÑ§ÏóÖÏ≤¥","geocode":"ÏßÄÎ¶¨Ï†Å ÏΩîÎìú","health":"Í±¥Í∞ï","intersection":"ÍµêÏ∞®Î°ú","landmark":"ÎûúÎìúÎßàÌÅ¨","natural_feature":"ÏûêÏó∞ ÏßÄÌòï","neighborhood":"Ï£ºÎ≥Ä ÏßÄÏó≠","place_of_worship":"ÏòàÎ∞∞ Ïû•ÏÜå","plus_code":"ÌîåÎü¨Ïä§ ÏΩîÎìú","point_of_interest":"Í¥ÄÏã¨ ÏßÄÏ†ê","political":"Ï†ïÏπòÏ†Å Íµ¨Ïó≠","post_box":"Ïö∞Ìé∏Ìï®","postal_code_prefix":"Ïö∞Ìé∏Î≤àÌò∏ Ï†ëÎëêÏÇ¨","postal_code_suffix":"Ïö∞Ìé∏Î≤àÌò∏ Ï†ëÎØ∏ÏÇ¨","postal_town":"Ïö∞Ìé∏ÎèÑÏãú","premise":"Í±¥Î¨º","room":"Î∞©","route":"Í≤ΩÎ°ú","street_address":"ÎèÑÎ°úÎ™Ö Ï£ºÏÜå","street_number":"ÎèÑÎ°úÎ™Ö Ï£ºÏÜå Î≤àÌò∏","sublocality":"ÌïòÏúÑ ÏßÄÏó≠","sublocality_level_1":"ÌïòÏúÑ ÏßÄÏó≠ (Î†àÎ≤® 1)","sublocality_level_2":"ÌïòÏúÑ ÏßÄÏó≠ (Î†àÎ≤® 2)","sublocality_level_3":"ÌïòÏúÑ ÏßÄÏó≠ (Î†àÎ≤® 3)","sublocality_level_4":"ÌïòÏúÑ ÏßÄÏó≠ (Î†àÎ≤® 4)","sublocality_level_5":"ÌïòÏúÑ ÏßÄÏó≠ (Î†àÎ≤® 5)","subpremise":"Í±¥Î¨º ÎÇ¥ Íµ¨Ïó≠","town_square":"ÌÉÄÏö¥ Ïä§ÌÄòÏñ¥"};
    const excludedPlaceTypes=["administrative_area_level_1","administrative_area_level_2","administrative_area_level_3","administrative_area_level_4","administrative_area_level_5","administrative_area_level_6","administrative_area_level_7","colloquial_area","continent","country","locality","neighborhood","political","postal_code","postal_code_prefix","postal_code_suffix","postal_town","school_district","sublocality","sublocality_level_1","sublocality_level_2","sublocality_level_3","sublocality_level_4","sublocality_level_5","plus_code","establishment","floor","premise","subpremise","room","street_address","street_number","intersection","route","corporate_office","general_contractor","real_estate_agency","insurance_agency","lawyer","accounting","finance","storage","telecommunications_service_provider","moving_company","electrician","plumber","roofing_contractor","courier_service","warehouse_store","wholesaler","auto_parts_store","butcher_shop","beauty_salon","nail_salon","hair_salon","barber_shop","tanning_studio","makeup_artist","foot_care","psychic","astrologer","apartment_building","apartment_complex","condominium_complex","housing_complex","mobile_home_park","church","hindu_temple","mosque","synagogue","place_of_worship","chiropractor","physiotherapist","skin_care_clinic","medical_lab","wellness_center","child_care_agency","summer_camp_organizer","consultant","painter","tailor","point_of_interest"]

    function loadGoogleMapsApi() {
        fetch('/api/google-places/apikey')
            .then(response => response.text())
            .then(apiKey => {
                let script = document.createElement("script");
                script.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}&libraries=places&callback=initMap`;
                script.async = true;
                script.defer = true;
                document.head.appendChild(script);
            })
            .catch(error => console.error("API Key Í∞ÄÏ†∏Ïò§Í∏∞ Ïã§Ìå®:", error));
    }

    function showTab(tabId) {
        // Î™®Îì† ÌÉ≠ Ïà®Í∏∞Í∏∞
        document.querySelectorAll(".tab-pane").forEach(tab => {
            tab.classList.remove("active");
        });

        // ÏÑ†ÌÉùÌïú ÌÉ≠ ÌôúÏÑ±Ìôî
        document.getElementById(tabId).classList.add("active");

        // Î™®Îì† ÌÉ≠ Î≤ÑÌäºÏóêÏÑú active Ï†úÍ±∞
        document.querySelectorAll(".tab-button").forEach(button => {
            button.classList.remove("active");
        });

        // ÏÑ†ÌÉùÌïú Î≤ÑÌäº ÌôúÏÑ±Ìôî
        if (tabId === "nadeuli-search-tab") {
            document.getElementById("nadeuli-tab-btn").classList.add("active");
        } else {
            document.getElementById("google-tab-btn").classList.add("active");
        }
    }



    function initMap() {
        map = new google.maps.Map(document.getElementById("map"), {
            center: { lat: 37.5665, lng: 126.9780 },
            zoom: 13,
        });
    }

    function handleGoogleKeyPress(event) {
        if (event.key === "Enter") {
            event.preventDefault();
            searchGooglePlaces();
        }
    }

    function handleNadeuliKeyPress(event) {
        if (event.key === "Enter") {
            event.preventDefault();
            searchNadeuliPlaces();
        }
    }
    function searchNadeuliPlaces() {
        let query = document.getElementById("nadeuli-place-search").value;
        if (!query) return;

        $.ajax({
            url: "/api/nadeuli-places/search",
            type: "GET",
            data: { query: query },
            success: function (data) {
                let results = data.places || [];
                // displaySearchResults(results, "nadeuli");
            },
            error: function (error) {
                console.error("ÎÇòÎì§Ïù¥ Í≤ÄÏÉâ Ïò§Î•ò:", error);
            }
        });
    }
    function searchGooglePlaces() {
        let query = document.getElementById("google-place-search").value;
        if (!query) return;

        let location = { lat: 33.4996, lng: 126.5312 }; // Ï†úÏ£ºÎèÑ ÏúÑÎèÑ, Í≤ΩÎèÑ
        let radius = 50000; // Î∞òÍ≤Ω 50km

        $.ajax({
            url: "/api/google-places/search",
            type: "GET",
            data: {
                query: query,
                lat: location.lat,
                lng: location.lng,
                radius: radius
            },
            success: function (data) {
                try {
                    let parsedData = typeof data === "string" ? JSON.parse(data) : data; // JSON Î¨∏ÏûêÏó¥Ïù∏ÏßÄ ÌôïÏù∏ ÌõÑ Î≥ÄÌôò
                    let results = parsedData.places || []; // `places` ÌÇ§ÏóêÏÑú Îç∞Ïù¥ÌÑ∞ Í∞ÄÏ†∏Ïò§Í∏∞
                    clearMarkers();
                    displayGoogleSearchResults(results);
                } catch (error) {
                    console.error("JSON parsing error:", error);
                }
            },
            error: function (error) {
                console.error("Error fetching data from backend:", error);
            }
        });
    }


    function displayGoogleSearchResults(places) {
        let resultsContainer = document.getElementById(`google-search-results`);
        let resultsHeader = document.getElementById(`google-search-results-header`)

        resultsHeader.innerText = `Í≤ÄÏÉâ Í≤∞Í≥º Ï¥ù${places.length}Í±¥`; // Í≤ÄÏÉâ Í∞úÏàò ÏóÖÎç∞Ïù¥Ìä∏
        resultsContainer.innerHTML = ""; // Í∏∞Ï°¥ Í≤∞Í≥º Ï¥àÍ∏∞Ìôî
        places.forEach((place) => {
            let placeName = place.displayName?.text || "Ïù¥Î¶Ñ ÏóÜÏùå";
            let address = place.formattedAddress || "Ï£ºÏÜå Ï†ïÎ≥¥ ÏóÜÏùå";
            let location = new google.maps.LatLng(place.location.latitude, place.location.longitude);
            let placeId = place.id || ""; // placeId Ï†ÄÏû•

            let filteredTypes = place.types ? translatePlaceTypes(place.types) : [];
            let typesText = filteredTypes.length > 0 ? filteredTypes.join(", ") : "";

            let listItem = document.createElement("div");
            listItem.className = "google-result-item";
            listItem.setAttribute("data-id", placeId); // placeId Ï†ÄÏû•

            listItem.innerHTML = `
            <div class="google-result-content">
                <div class="google-result-title">${placeName}</div>
                <div class="google-result-address">${address}</div>
                <div class="google-result-tags">${typesText}</div>
            </div>
            <button class="btn btn-sm btn-secondary register-btn" onclick="registerPlace(this)">
                Îì±Î°ù
            </button>
        `;

            listItem.onclick = () => selectPlace(location);
            resultsContainer.appendChild(listItem);

            let marker = new google.maps.Marker({
                position: location,
                map: map,
                title: placeName,
            });
            markers.push(marker);
        });

        if (places.length > 0) {
            map.setCenter(new google.maps.LatLng(places[0].location.latitude, places[0].location.longitude));
        }
    }


    function selectPlace(location) {
        map.setCenter(location);
        map.setZoom(15);
    }

    function registerPlace(button) {
        let listItem = button.closest(".google-result-item");
        let placeId = listItem.getAttribute("data-id"); // data-idÏóêÏÑú placeId Í∞ÄÏ†∏Ïò§Í∏∞
        let name = listItem.querySelector(".google-result-title").innerText;
        let address = listItem.querySelector(".google-result-address").innerText;

        if (!placeId) {
            alert("‚ùå Place IDÍ∞Ä ÏóÜÏäµÎãàÎã§. Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.");
            return;
        }

        // 1Ô∏è‚É£ ÏÇ¨Ïö©Ïûê ÌôïÏù∏
        if (!confirm(`${name} Ïû•ÏÜåÎ•º Îì±Î°ùÌïòÏãúÍ≤†ÏäµÎãàÍπå?`)) {
            return;
        }

        // 2Ô∏è‚É£ Ïû•ÏÜå Îì±Î°ù API Ìò∏Ï∂ú
        $.ajax({
            url: "/api/place/register",
            type: "POST",
            contentType: "application/json",
            data: JSON.stringify({
                placeId: placeId, // Google Place IDÎ°ú Îì±Î°ù
            }),
            success: function (response) {
                // 3Ô∏è‚É£ ÏÑ±Í≥µ Ï≤òÎ¶¨
                if (response.status === 201) {
                    alert(`‚úÖ Ïû•ÏÜåÍ∞Ä ÏÑ±Í≥µÏ†ÅÏúºÎ°ú Îì±Î°ùÎêòÏóàÏäµÎãàÎã§: ${name}`);
                } else if (response.status === 200) {
                    alert(`‚ö† Ïù¥ÎØ∏ Îì±Î°ùÎêú Ïû•ÏÜåÏûÖÎãàÎã§: ${name}`);
                }
            },
            error: function (error) {
                // 4Ô∏è‚É£ Ïã§Ìå® Ï≤òÎ¶¨
                console.error("üö® Ïû•ÏÜå Îì±Î°ù Ïã§Ìå®:", error);
                alert("‚ùå Ïû•ÏÜå Îì±Î°ùÏóê Ïã§Ìå®ÌñàÏäµÎãàÎã§. Îã§Ïãú ÏãúÎèÑÌï¥Ï£ºÏÑ∏Ïöî.");
            }
        });
    }



    // ÌÉúÍ∑∏ ÌïúÍ∏Ä Î≥ÄÌôò Ìï®Ïàò
    function translatePlaceTypes(types) {
        return types
            .filter(type => !excludedPlaceTypes.includes(type)) // Ï†úÏô∏ Î¶¨Ïä§Ìä∏ ÌïÑÌÑ∞ÎßÅ
            .map(type => placeTypeTranslations[type] || `#${type.replace(/_/g, ' ')}`); // ÌïúÍ∏Ä Î≥ÄÌôò or Ìï¥ÏãúÌÉúÍ∑∏ Ïä§ÌÉÄÏùº
    }

    // function selectPlace(place) {
    //     map.setCenter(place.geometry.location);
    //     map.setZoom(15);
    // }

    function clearMarkers() {
        markers.forEach((marker) => marker.setMap(null));
        markers = [];
    }
    function clearGoogleSearch() {
        document.getElementById("google-place-search").value = "";
        document.getElementById("google-search-results").innerHTML = "";
        document.getElementById("google-search-results-header").innerText = "Í≤ÄÏÉâ Í≤∞Í≥º Ï¥ù 0Í±¥";
        clearMarkers();
    }

    function clearNadeuliSearch() {
        document.getElementById("nadeuli-place-search").value = "";
        document.getElementById("nadeuli-search-results").innerHTML = "";
        document.getElementById("nadeuli-search-results-header").innerText = "Í≤ÄÏÉâ Í≤∞Í≥º Ï¥ù 0Í±¥";
    }

    document.addEventListener("DOMContentLoaded", initMap);



</script>
</body>
</html>